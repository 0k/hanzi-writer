/*! Hanzi Writer v0.5.1 | https://chanind.github.io/hanzi-writer */
!function(t){function n(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var i={};n.m=t,n.c=i,n.d=function(t,i,r){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var i=t&&t.t?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=5)}([function(t,n,i){"use strict";(function(n){function i(t){return Math.max.apply(null,t)}function r(t){return Math.min.apply(null,t)}var s=0;t.exports={inherits:function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},assign:function(t){for(var n=Object(t),i=arguments.length,r=Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return r.forEach(function(t){if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}),n},arrayMax:i,arrayMin:r,average:function(t){return t.reduce(function(t,n){return n+t},0)/t.length},callIfExists:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t&&t.apply(void 0,i)},counter:function(){return s+=1},emptyFunc:function(){},getExtremes:function(t){var n=i(t),s=r(t);return[n,(n+s)/2,s]},isMSBrowser:function(){return n.navigator&&n.navigator.userAgent&&(n.navigator.userAgent.indexOf("Edge")>=0||n.navigator.userAgent.indexOf("MSIE")>=0)},timeout:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(n,i){setTimeout(n,t)})}}}).call(n,i(2))},function(t,n,i){"use strict";function r(t,n){this.x=parseFloat(t,10),this.y=parseFloat(n,10)}var s=function(){function t(t,n){var i=[],r=!0,s=!1,u=void 0;try{for(var h,e=t[Symbol.iterator]();!(r=(h=e.next()).done)&&(i.push(h.value),!n||i.length!==n);r=!0);}catch(t){s=!0,u=t}finally{try{!r&&e.return&&e.return()}finally{if(s)throw u}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=i(0),h=u.arrayMin,e=u.arrayMax;r.prototype.subtract=function(t){return new r(this.x-t.x,this.y-t.y)},r.prototype.add=function(t){return new r(this.x+t.x,this.y+t.y)},r.prototype.getMagnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},r.prototype.equals=function(t){return!!t&&(t.x===this.x&&t.y===this.y)},r.getBounds=function(t){var n=t.map(function(t){return t.x}),i=t.map(function(t){return t.y}),s=e(n),u=e(i);return[new r(h(n),h(i)),new r(s,u)]},r.getOverallBounds=function(t){var n=[];return t.forEach(function(t){var i=t.getBounds(),r=s(i,2),u=r[0],h=r[1];n.push(u),n.push(h)}),r.getBounds(n)},r.getDistance=function(t,n){return t.subtract(n).getMagnitude()},r.cosineSimilarity=function(t,n){return(t.x*n.x+t.y*n.y)/t.getMagnitude()/n.getMagnitude()},t.exports=r},function(t,n){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,n,i){"use strict";function r(){this.isDestroyed=!1,this.childRenderers=[],this.parentRenderer=null}r.prototype.draw=function(){return this},r.prototype.registerChild=function(t){return this.childRenderers.push(t),t.setParent(this),t},r.prototype.setParent=function(t){return this.parentRenderer=t,this},r.prototype.setCanvas=function(t){return this.canvas=t,this},r.prototype.destroy=function(){this.isDestroyed=!0,this.childRenderers.forEach(function(t){return t.destroy()})},t.exports=r},function(t,n,i){"use strict";(function(n){function r(t){return n.document.createElementNS("http://www.w3.org/2000/svg",t)}function s(t,n,i){t.setAttributeNS(null,n,i)}function u(t,n){Object.keys(n).forEach(function(i){return s(t,i,n[i])})}function h(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.r=t,this.u=n.duration||300,this.h=!1}function e(t,n,i){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.super_.call(this,function(t){var n=(r.e-r.f)*t+r.f;r.a.style[r.v]=n},s),this.a=t,this.v=n,this.e=i,this.w=s.ensureEndStyle}function o(t,n){this.svg=t,this.defs=n}var c=i(0).inherits,f=n.performance&&function(){return n.performance.now()}||function(){return Date.now()},a=n.requestAnimationFrame||function(t){return setTimeout(function(){return t(f())},1e3/60)},v=n.cancelAnimationFrame||clearTimeout,l=function(t){return-Math.cos(t*Math.PI)/2+.5};h.prototype.start=function(){var t=this;return this.h=!0,this.k=f(),this.g=0,this.S(),new Promise(function(n,i){t.M=n})},h.prototype.S=function(){var t=this;this.P=a(function(n){return t.b(n)})},h.prototype.b=function(t){if(this.h){var n=Math.min(1,(t-this.k)/this.u);if(n===this.g)return this.S();this.g=n;var i=l(n);this.r(i),1===n?(this.P=null,this.finish()):this.S()}},h.prototype.finish=function(){this.h&&(this.h=!1,this.P&&v(this.P),this.M&&(this.M(),this.M=null))},c(e,h),e.prototype.start=function(){return this.f=parseFloat(this.a.style[this.v],10),this.f===this.e?Promise.resolve():e.super_.prototype.start.call(this)},e.prototype.finish=function(){return this.h&&this.w&&(this.a.style[this.v]=this.e),e.super_.prototype.finish.call(this)},o.prototype.createSubCanvas=function(){var t=r("g");return this.svg.appendChild(t),new o(t,this.defs)},o.init=function(t){var i=void 0,s=t;"string"==typeof t&&(s=n.document.getElementById(t));var h=s.nodeName.toUpperCase();"SVG"===h||"G"===h?i=s:(i=r("svg"),s.appendChild(i)),u(i,{width:"100%",height:"100%"});var e=r("defs");return i.appendChild(e),new o(i,e)},o.prototype.remove=function(){this.svg.parentNode.removeChild(this.svg)},t.exports={createElm:r,attrs:u,attr:s,Canvas:o,Tween:h,StyleTween:e,getPathString:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t[0],r=t.slice(1),s="M "+i.x+" "+i.y;return r.forEach(function(t){s+=" L "+t.x+" "+t.y}),n&&(s+="Z"),s}}}).call(n,i(2))},function(t,n,i){"use strict";(function(n){function r(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.O=new v,this.C=f.Canvas.init(t),this.setOptions(i),this.setCharacter(n),this.F(),this.j=null}var s=i(6),u=i(9),h=i(1),e=i(10),o=i(13),c=i(14),f=i(4),a=i(18),v=i(19),l=i(0),d=l.assign,w=l.isMSBrowser,k=l.timeout,m={charDataLoader:a,showOutline:!0,showCharacter:!0,width:null,height:null,padding:20,strokeAnimationSpeed:1,strokeFadeDuration:400,strokeHighlightDuration:200,strokeHighlightSpeed:2,delayBetweenStrokes:1e3,delayBetweenLoops:2e3,strokeColor:"#555",radicalColor:null,highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",showHintAfterMisses:3,highlightOnComplete:!0,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2,usePolygonMasks:w()},g=function(t){var n=d({},m,t);return t.strokeAnimationDuration&&!t.strokeAnimationSpeed&&(n.strokeAnimationSpeed=500/n.strokeAnimationDuration),t.strokeHighlightDuration&&!t.strokeHighlightSpeed&&(n.strokeHighlightSpeed=500/n.strokeHighlightDuration),n};if(r.prototype.setOptions=function(t){this.A=g(t),this.D={strokeColor:this.A.strokeColor,radicalColor:this.A.radicalColor,strokeWidth:this.A.strokeWidth,strokeAnimationSpeed:this.A.strokeAnimationSpeed,strokeFadeDuration:this.A.strokeFadeDuration,delayBetweenStrokes:this.A.delayBetweenStrokes,usePolygonMasks:this.A.usePolygonMasks},this.T=d({},this.D,{strokeColor:this.A.outlineColor,radicalColor:null,strokeWidth:this.A.outlineWidth}),this.L=d({},this.D,{strokeColor:this.A.highlightColor,radicalColor:null,strokeAnimationSpeed:this.A.strokeHighlightSpeed}),this.U={strokeColor:this.A.drawingColor,strokeWidth:this.A.drawingWidth,fadeDuration:this.A.drawingFadeDuration}},r.prototype.showCharacter=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.W(function(n){return t.I.show(n)},n)},r.prototype.hideCharacter=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.W(function(n){return t.I.hide(n)},n)},r.prototype.animateCharacter=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cancelQuiz(),this.W(function(n){return t.I.animate(n)},n)},r.prototype.loopCharacterAnimation=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cancelQuiz(),this.W(function i(r){var s=d({},t.A,n).delayBetweenLoops,u=t.I.animate(r);return u?u.then(function(){return k(s)}).then(function(){return i(r)}):null},n)},r.prototype.showOutline=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.W(function(n){return t.B.show(n)},n)},r.prototype.hideOutline=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.W(function(n){return t.B.hide(n)},n)},r.prototype.quiz=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.R(function(){t.cancelQuiz(),t.j=new c({canvas:t.G,animator:t.O,character:t.H,characterRenderer:t.I,highlightRenderer:t.N,quizOptions:d({},t.A,n),userStrokeOptions:t.U})})},r.prototype.cancelQuiz=function(){this.j&&this.j.cancel(),this.j=null},r.prototype.setCharacter=function(t){var n=this;this.cancelQuiz(),this.z&&this.z.destroy(),this.I&&this.I.destroy(),this.B&&this.B.destroy(),this.N&&this.N.destroy(),this.q=this.J(t).then(function(i){var r=new e;n.H=r.generateCharacter(t,i),n.V=new o(n.H,n.Z(n.A)),n.z=new u(n.V).setCanvas(n.C),n.G=n.z.positionedCanvas,n.B=new s(n.H,n.T).setCanvas(n.G).draw(),n.I=new s(n.H,n.D).setCanvas(n.G).draw(),n.N=new s(n.H,n.L).setCanvas(n.G).draw(),n.A.showCharacter&&n.I.showImmediate(),n.A.showOutline&&n.B.showImmediate()})},r.prototype.Z=function(t){var n=d({},t);if(n.width&&!n.height)n.height=n.width;else if(n.height&&!n.width)n.width=n.height;else if(!n.width&&!n.height){var i=this.C.svg.getBoundingClientRect(),r=i.width,s=i.height,u=Math.min(r,s);n.width=u,n.height=u}return n},r.prototype.J=function(t){var n=this;return this.isLoadingCharData&&this.cancelLoadingCharData(),this.isLoadingCharData=!0,new Promise(function(i,r){n.cancelLoadingCharData=r;var s=n.A.charDataLoader(t,i);s&&i(s)}).then(function(t){return n.isLoadingCharData=!1,t})},r.prototype.R=function(t){return this.q.then(t)},r.prototype.F=function(){var t=this;this.C.svg.addEventListener("mousedown",function(n){!t.isLoadingCharData&&t.j&&(n.preventDefault(),t.K("startUserStroke",t.Q(n)))}),this.C.svg.addEventListener("touchstart",function(n){!t.isLoadingCharData&&t.j&&(n.preventDefault(),t.K("startUserStroke",t.X(n)))}),this.C.svg.addEventListener("mousemove",function(n){!t.isLoadingCharData&&t.j&&(n.preventDefault(),t.K("continueUserStroke",t.Q(n)))}),this.C.svg.addEventListener("touchmove",function(n){!t.isLoadingCharData&&t.j&&(n.preventDefault(),t.K("continueUserStroke",t.X(n)))}),n.document.addEventListener("mouseup",function(){return t.K("endUserStroke")}),n.document.addEventListener("touchend",function(){return t.K("endUserStroke")})},r.prototype.K=function(t){var n;if(this.j){for(var i=arguments.length,r=Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];(n=this.j)[t].apply(n,r)}},r.prototype.Q=function(t){var n=this.C.svg.getBoundingClientRect();return this.V.convertExternalPoint(new h(t.clientX-n.left,t.clientY-n.top))},r.prototype.X=function(t){var n=this.C.svg.getBoundingClientRect(),i=t.touches[0].clientX-n.left,r=t.touches[0].clientY-n.top;return this.V.convertExternalPoint(new h(i,r))},r.prototype.Y=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.O.animate(t,n)},r.prototype.W=function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.R(function(){return n.Y(t,i)})},void 0!==n.window){var y=n.window.HanziWriter;r.noConflict=function(){return n.window.HanziWriter=y,r},n.window.HanziWriter=r}t.exports=r}).call(n,i(2))},function(t,n,i){"use strict";function r(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.super_.call(this),this.options=i,this.character=t,this.strokeRenderers=this.character.strokes.map(function(t){return n.registerChild(new u(t,i))})}var s=i(3),u=i(7),h=i(0),e=h.timeout;(0,h.inherits)(r,s),r.prototype.getBounds=function(){return this.character.getBounds()},r.prototype.show=function(t){var n=this.strokeRenderers.map(function(n){return n.show(t)});return Promise.all(n)},r.prototype.showImmediate=function(){this.strokeRenderers.map(function(t){return t.showImmediate()})},r.prototype.hide=function(t){var n=this.strokeRenderers.map(function(n){return n.hide(t)});return Promise.all(n)},r.prototype.hideImmediate=function(){this.strokeRenderers.map(function(t){return t.hideImmediate()})},r.prototype.flash=function(t){var n=this;return this.show(t).then(function(){return n.hide(t)})},r.prototype.showStroke=function(t,n){return this.getStrokeRenderer(t).show(n)},r.prototype.draw=function(){return this.strokeRenderers.forEach(function(t){return t.draw()}),this},r.prototype.getStrokeRenderer=function(t){return this.strokeRenderers[t]},r.prototype.animate=function(t){var n=this;if(!t.isActive())return null;var i=this.hide(t);return this.strokeRenderers.forEach(function(r,s){s>0&&(i=i.then(function(){return e(n.options.delayBetweenStrokes)})),i=i.then(function(){return r.animate(t)})}),i},r.prototype.setCanvas=function(t){return r.super_.prototype.setCanvas.call(this,t),this.strokeRenderers.forEach(function(n){return n.setCanvas(t)}),this},t.exports=r},function(t,n,i){"use strict";function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.super_.call(this),this.stroke=t,this.options=n}var s=i(3),u=i(0),h=u.counter,e=u.inherits,o=i(4),c=i(8),f=c.extendPointOnLine,a=c.getLineSegmentsPortion,v=c.filterParallelPoints,l=c.linesToPolygon,d=function(t,n){if(t.length<2)return t;var i=t[1],r=t[0],s=f(i,r,n),u=t.slice(1);return u.unshift(s),u},w=function(t,n){if(t.length<2)return t;var i=t[t.length-2],r=t[t.length-1],s=f(i,r,n),u=t.slice(0,t.length-1);return u.push(s),u};e(r,s),r.prototype.draw=function(){this.path=o.createElm("path");var t=this.options.usePolygonMasks?"clipPath":"mask";this.mask=o.createElm(t),this.maskPath=o.createElm("path");var n="mask-"+h();o.attr(this.mask,"id",n),o.attr(this.path,"d",this.stroke.path),o.attrs(this.path,this.getStrokeAttrs()),this.path.style.opacity=0;var i=this.options.usePolygonMasks?"clip-path":"mask";return o.attr(this.path,i,"url(#"+n+")"),this.extendedMaskPoints=d(v(this.stroke.points),100),this.options.usePolygonMasks?(this.extendedMaskPoints=w(this.extendedMaskPoints,100),this.polyMaskTip=o.createElm("circle"),this.mask.appendChild(this.polyMaskTip),o.attr(this.polyMaskTip,"r",100),this.$(1)):(o.attr(this.maskPath,"d",o.getPathString(this.extendedMaskPoints)),this._=this.maskPath.getTotalLength(),o.attrs(this.maskPath,{stroke:"#FFFFFF","stroke-width":200,fill:"none","stroke-linecap":"round","stroke-linejoin":"miter","stroke-dasharray":this._+","+this._}),this.maskPath.style["stroke-dashoffset"]=0),this.mask.appendChild(this.maskPath),this.canvas.defs.appendChild(this.mask),this.canvas.svg.appendChild(this.path),this},r.prototype.$=function(t){var n=a(this.extendedMaskPoints,t),i=o.getPathString(l(n,200),!0),r=n[n.length-1];o.attr(this.maskPath,"d",i),o.attr(this.polyMaskTip,"cx",r.x),o.attr(this.polyMaskTip,"cy",r.y)},r.prototype.show=function(t){this.options.usePolygonMasks?this.$(1):this.maskPath.style["stroke-dashoffset"]=0;var n=new o.StyleTween(this.path,"opacity",1,{duration:this.options.strokeFadeDuration,ensureEndStyle:!0});return t.registerSvgAnimation(n),n.start()},r.prototype.hide=function(t){var n=new o.StyleTween(this.path,"opacity",0,{duration:this.options.strokeFadeDuration,ensureEndStyle:!0});return t.registerSvgAnimation(n),n.start()},r.prototype.animate=function(t){var n=this;if(!t.isActive())return null;this.showImmediate();var i=(this.stroke.getLength()+600)/(3*this.options.strokeAnimationSpeed),r=void 0;return this.options.usePolygonMasks?(this.$(0),r=new o.Tween(function(t){return n.$(t)},{duration:i})):(this.maskPath.style["stroke-dashoffset"]=.999*this._,r=new o.StyleTween(this.maskPath,"stroke-dashoffset",0,{duration:i})),t.registerSvgAnimation(r),r.start()},r.prototype.hideImmediate=function(){this.path.style.opacity=0},r.prototype.showImmediate=function(){this.path.style.opacity=1},r.prototype.highlight=function(t){var n=this;return this.animate(t).then(function(){return n.hide(t)})},r.prototype.getColor=function(){var t=this.options.strokeColor;return this.options.radicalColor&&this.stroke.isInRadical&&(t=this.options.radicalColor),t},r.prototype.getStrokeAttrs=function(){return{fill:this.getColor(),stroke:this.getColor(),"stroke-width":this.options.strokeWidth}},r.prototype.destroy=function(){r.super_.prototype.destroy.call(this),this.path&&this.path.remove(),this.maskPath&&this.maskPath.remove(),this.mask&&this.mask.remove()},t.exports=r},function(t,n,i){"use strict";var r=i(1),s=function(t,n,i){var s=t.subtract(n),u=i/s.getMagnitude(),h=new r(u*s.y,-1*u*s.x);return[t.add(h),t.subtract(h)]},u=function(t,n,i,s){var u=t.x,h=n.x,e=i.x,o=s.x,c=t.y,f=n.y,a=i.y,v=s.y,l=(u-h)*(a-v)-(c-f)*(e-o);return new r(((u*f-c*h)*(e-o)-(u-h)*(e*v-a*o))/l,((u*f-c*h)*(a-v)-(c-f)*(e*v-a*o))/l)};t.exports={extendPointOnLine:function(t,n,i){var s=n.subtract(t),u=i/s.getMagnitude();return new r(n.x+u*s.x,n.y+u*s.y)},filterParallelPoints:function(t){if(t.length<3)return t;var n=[t[0],t[1]];return t.slice(2).forEach(function(t,i){var r=n.length,s=t.subtract(n[r-1]),u=n[r-1].subtract(n[r-2]);s.y*u.x-s.x*u.y==0&&n.pop(),n.push(t)}),n},getLineSegmentsPortion:function(t,n){if(t.length<2||n>=1)return t;if(0===n)return[t[0]];for(var i=0,s=1;s<t.length;s+=1)i+=r.getDistance(t[s],t[s-1]);for(var u=[t[0]],h=i*n,e=0,o=1;o<t.length;o+=1){var c=t[o-1],f=r.getDistance(t[o],c);if(e+f>=h){var a=t[o].subtract(c),v=(h-e)/f;return u.push(new r(c.x+v*a.x,c.y+v*a.y)),u}e+=f,u.push(t[o])}return u},getLinesIntersectPoint:u,getPerpendicularPointsAtDist:s,linesToPolygon:function(t,n){if(t.length<2)return t;for(var i=n/2,h=[],e=[],o=1;o<t.length;o+=1){var c=s(t[o-1],t[o],i),f=s(t[o],t[o-1],i);h.push({start:c[0],end:f[1]}),e.push({start:c[1],end:f[0]})}for(var a=[h[0].start],v=[e[0].start],l=1;l<h.length;l+=1){var d=u(h[l-1].start,h[l-1].end,h[l].start,h[l].end),w=u(e[l-1].start,e[l-1].end,e[l].start,e[l].end);a.push(d),v.push(w)}var k=h[h.length-1].end,m=e[e.length-1].end,g=u(a[a.length-1],v[v.length-1],k,m);if(r.getDistance(g,t[t.length-1])<i){var y=k.subtract(t[t.length-1]),p=g.subtract(t[t.length-1]);y.x*p.x+y.y*p.y>0?k=g:m=g}return a.push(k),v.push(m),v.reverse(),a.concat(v)}}},function(t,n,i){"use strict";function r(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.super_.call(this),this.positioner=t,this.positionedCanvas=null}var s=i(3),u=i(4);(0,i(0).inherits)(r,s),r.prototype.setCanvas=function(t){r.super_.prototype.setCanvas.call(this,t),this.positionedCanvas=t.createSubCanvas();var n=this.positionedCanvas.svg;return u.attr(n,"transform","\n    translate("+this.positioner.getXOffset()+", "+(this.positioner.getHeight()-this.positioner.getYOffset())+")\n    scale("+this.positioner.getScale()+", "+-1*this.positioner.getScale()+")\n  "),this},r.prototype.destroy=function(){r.super_.prototype.destroy.call(this),this.positionedCanvas.remove()},t.exports=r},function(t,n,i){"use strict";function r(){}var s=function(){function t(t,n){var i=[],r=!0,s=!1,u=void 0;try{for(var h,e=t[Symbol.iterator]();!(r=(h=e.next()).done)&&(i.push(h.value),!n||i.length!==n);r=!0);}catch(t){s=!0,u=t}finally{try{!r&&e.return&&e.return()}finally{if(s)throw u}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=i(1),h=i(11),e=i(12);r.prototype.generateCharacter=function(t,n){var i=this.generateStrokes(n);return new e(t,i)},r.prototype.generateStrokes=function(t){var n=function(n){return t.radStrokes&&t.radStrokes.indexOf(n)>=0};return t.strokes.map(function(i,r){var e=t.medians[r].map(function(t){var n=s(t,2),i=n[0],r=n[1];return new u(i,r)});return new h(i,e,r,n(r))})},t.exports=r},function(t,n,i){"use strict";function r(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.path=t,this.points=n,this.strokeNum=i,this.isInRadical=r}var s=i(1);r.prototype.getStrokeNum=function(){return this.strokeNum},r.prototype.getStartingPoint=function(){return this.points[0]},r.prototype.getEndingPoint=function(){return this.points[this.points.length-1]},r.prototype.getLength=function(){var t=this.points[0];return this.points.slice(1).reduce(function(n,i){var r=s.getDistance(i,t);return t=i,n+r},0)},r.prototype.getVectors=function(){var t=this.points[0];return this.points.slice(1).map(function(n){var i=n.subtract(t);return t=n,i})},r.prototype.getDistance=function(t){var n=this.points.map(function(n){return s.getDistance(n,t)});return Math.min.apply(Math,n)},r.prototype.getAverageDistance=function(t){var n=this;return t.reduce(function(t,i){return t+n.getDistance(i)},0)/t.length},t.exports=r},function(t,n,i){"use strict";function r(t,n){this.symbol=t,this.strokes=n}var s=i(1);r.prototype.getStroke=function(t){return this.strokes[t]},r.prototype.getNumStrokes=function(){return this.strokes.length},r.prototype.getBounds=function(){return s.getBounds([new s(0,900),new s(1024,-124)])},t.exports=r},function(t,n,i){"use strict";function r(t,n){this.H=t,this.A=n,this.tt()}var s=i(1);r.prototype.convertExternalPoint=function(t){var n=(t.x-this.nt)/this.it,i=(this.getHeight()-this.rt-t.y)/this.it;return new s(n,i)},r.prototype.getXOffset=function(){return this.nt},r.prototype.getYOffset=function(){return this.rt},r.prototype.getScale=function(){return this.it},r.prototype.getHeight=function(){return this.A.height},r.prototype.tt=function(){var t=this.H.getBounds(),n=t[1].x-t[0].x,i=t[1].y-t[0].y,r=this.A.width-2*this.A.padding,s=this.A.height-2*this.A.padding,u=r/n,h=s/i;this.it=Math.min(u,h);var e=this.A.padding+(r-this.it*n)/2,o=this.A.padding+(s-this.it*i)/2;this.nt=-1*t[0].x*this.it+e,this.rt=-1*t[0].y*this.it+o},t.exports=r},function(t,n,i){"use strict";function r(t){var n=t.canvas,i=t.animator,r=t.character,u=t.characterRenderer,h=t.highlightRenderer,e=t.quizOptions,o=t.userStrokeOptions;this.C=n,this.O=i,this.H=r,this.I=u,this.N=h,this.st=e,this.U=o,this.ut=0,this.ht=0,this.et=0,this.ot=[],this.h=!0,this.ct=new s,this.ft()}var s=i(15),u=i(16),h=i(17),e=i(0).callIfExists;r.prototype.startUserStroke=function(t){return this.h?this.at?this.endUserStroke():(this.at=new u(t),this.vt=new h(this.at,this.U),void this.vt.setCanvas(this.C).draw()):null},r.prototype.continueUserStroke=function(t){this.at&&(this.at.appendPoint(t),this.vt.updatePath())},r.prototype.endUserStroke=function(){var t=this;if(!this.at)return Promise.resolve();this.O.animate(function(n){if(!t.h)return Promise.resolve();var i=[],r=t.lt(),s=t.ct.strokeMatches(t.at,r);return i.push(t.vt.fadeAndRemove(n)),t.at=null,t.vt=null,s?i.push(t.dt(r,n)):(t.wt(),t.ht>=t.st.showHintAfterMisses&&i.push(t.kt(n))),Promise.all(i)})},r.prototype.cancel=function(){this.h=!1},r.prototype.dt=function(t,n){var i=this;e(this.st.onCorrectStroke,{character:this.H.symbol,strokeNum:this.ut,mistakesOnStroke:this.ht,totalMistakes:this.et,strokesRemaining:this.H.getNumStrokes()-this.ut-1}),this.ut+=1,this.ht=0;var r=this.mt(t,n);return this.ut===this.H.getNumStrokes()&&(this.h=!1,e(this.st.onComplete,{character:this.H.symbol,totalMistakes:this.et}),this.st.highlightOnComplete&&(r=r.then(function(){return i.N.flash(n)}))),r},r.prototype.wt=function(){this.ht+=1,this.et+=1,e(this.st.onMistake,{character:this.H.symbol,strokeNum:this.ut,mistakesOnStroke:this.ht,totalMistakes:this.et,strokesRemaining:this.H.getNumStrokes()-this.ut})},r.prototype.kt=function(t){return this.N.getStrokeRenderer(this.ut).highlight(t)},r.prototype.mt=function(t,n){return this.ot.push(t),this.I.showStroke(t.strokeNum,n)},r.prototype.lt=function(){return this.H.getStroke(this.ut)},r.prototype.ft=function(){var t=this;this.O.animate(function(n){return t.I.hide(n)})},t.exports=r},function(t,n,i){"use strict";function r(){}var s=i(1),u=i(0).average;r.prototype.strokeMatches=function(t,n){var i=this.gt(t.points);if(i.length<2)return null;var r=n.getAverageDistance(i)<300,s=this.yt(i,n),u=this.pt(i,n);return r&&s&&u},r.prototype.yt=function(t,n){var i=s.getDistance(n.getStartingPoint(),t[0]),r=s.getDistance(n.getEndingPoint(),t[t.length-1]);return i<250&&r<250},r.prototype.pt=function(t,n){var i=this.St(t),r=n.getVectors(),h=i.map(function(t){var n=r.map(function(n){return s.cosineSimilarity(n,t)});return Math.max.apply(Math,n)});return u(h)>0},r.prototype.gt=function(t){if(t.length<2)return t;var n=[t[0]];return t.slice(1).forEach(function(t){t.equals(n[n.length-1])||n.push(t)}),n},r.prototype.Mt=function(t){var n=0,i=t[0];return t.forEach(function(t){n+=s.getDistance(t,i),i=t}),n},r.prototype.St=function(t){var n=[],i=t[0];return t.slice(1).forEach(function(t){n.push(t.subtract(i)),i=t}),n},t.exports=r},function(t,n,i){"use strict";function r(t){this.points=[t]}var s=i(1);r.prototype.getBounds=function(){return s.getBounds(this.points)},r.prototype.appendPoint=function(t){this.points.push(t)},t.exports=r},function(t,n,i){"use strict";function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.super_.call(this),this.options=n,this.userStroke=t}var s=i(3),u=i(0).inherits,h=i(4);u(r,s),r.prototype.getPathString=function(){return h.getPathString(this.userStroke.points)},r.prototype.updatePath=function(){h.attr(this.path,"d",this.getPathString())},r.prototype.draw=function(){return r.super_.prototype.draw.call(this),this.path=h.createElm("path"),h.attrs(this.path,this.getStrokeAttrs()),this.path.style.opacity=1,this.updatePath(),this.canvas.svg.appendChild(this.path),this},r.prototype.fadeAndRemove=function(t){var n=this,i=new h.StyleTween(this.path,"opacity",0,{duration:this.options.fadeDuration});return t.registerSvgAnimation(i),i.start().then(function(){return n.destroy()})},r.prototype.getStrokeAttrs=function(){return{fill:"none",stroke:this.options.strokeColor,"stroke-width":this.options.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"}},r.prototype.destroy=function(){r.super_.prototype.destroy.call(this),this.path&&this.path.remove()},t.exports=r},function(t,n,i){"use strict";(function(n){var i=function(t){return"https://cdn.jsdelivr.net/npm/hanzi-writer-data@1/"+t+".json"};t.exports=function(t,r){var s=new n.XMLHttpRequest;s.overrideMimeType&&s.overrideMimeType("application/json"),s.open("GET",i(t),!0),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&r(JSON.parse(s.responseText))},s.send(null)}}).call(n,i(2))},function(t,n,i){"use strict";function r(){this.Pt=null}var s=i(20);r.prototype.animate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.bt(n);return t(i).then(function(){return i.finish()})},r.prototype.bt=function(t){return this.Pt&&this.Pt.cancel(),this.Pt=new s(t),this.Pt},t.exports=r},function(t,n,i){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.Ot=[],this.h=!0,this.Ct=t.onComplete}var s=i(0).callIfExists;r.prototype.cancel=function(){this.isActive()&&(this.h=!1,this.Ot.forEach(function(t){return t.finish()}))},r.prototype.registerSvgAnimation=function(t){-1===this.Ot.indexOf(t)&&this.Ot.push(t)},r.prototype.isActive=function(){return this.h},r.prototype.finish=function(){this.isActive()&&(this.h=!1,s(this.Ct))},t.exports=r}]);