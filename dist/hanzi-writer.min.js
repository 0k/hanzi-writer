!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=d(g),i=c(6),j=d(i),k=c(7),l=d(k),m=c(8),n=d(m),o=c(9),p=d(o),q=c(10),r={charDataLoader:function(a){return hanziData[a]},width:null,height:null,padding:20,strokeAnimationDuration:300,strokeHighlightDuration:500,strokeHighlightColor:"#AAF",userStrokeFadeDuration:300,delayBetweenStrokes:1e3,userStrokeAttrs:{fill:"none",stroke:"#333","stroke-width":4},strokeAttrs:{fill:"#555",stroke:"#555","stroke-width":2},hintAttrs:{fill:"#DDD",stroke:"#DDD","stroke-width":2}},s=function(a){return q._extend({},a)},t=function(){function a(b,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];e(this,a),this.svg=p["default"](b),this.options=q._extend(s(r),d),this.setCharacter(c),this.setupListeners(),this.hint.draw(),this.character.draw()}return f(a,[{key:"showCharacter",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.character.show(a)}},{key:"hideCharacter",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.character.hide(a)}},{key:"animateCharacter",value:function(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.character.animate()}},{key:"showHint",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.hint.show(a)}},{key:"hideHint",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.hint.hide(a)}},{key:"quiz",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.isQuizzing=!0,this.hideCharacter(a),a.showHint?this.showHint():this.hideHint(),this.enforceStrokeOrder=a.enforceStrokeOrder,this.currentStrokeIndex=0,this.numRecentMistakes=0,this.drawnStrokes=[]}},{key:"setCharacter",value:function(a){var b=this.options.charDataLoader(a);this.character=new h["default"](b,this.options),this.hint=new h["default"](b,this.getHintOptions()),this.positioner=new l["default"](this.character,this.options),this.hintPositioner=new l["default"](this.hint,this.options),this.hintPositioner.setCanvas(this.svg),this.positioner.setCanvas(this.svg)}},{key:"setupListeners",value:function(){var a=this;this.svg.node.addEventListener("mousedown",function(b){b.preventDefault(),a.startUserStroke(a.getMousePoint(b))}),this.svg.node.addEventListener("touchstart",function(b){b.preventDefault(),a.startUserStroke(a.getTouchPoint(b))}),this.svg.node.addEventListener("mousemove",function(b){b.preventDefault(),a.continueUserStroke(a.getMousePoint(b))}),this.svg.node.addEventListener("touchmove",function(b){b.preventDefault(),a.continueUserStroke(a.getTouchPoint(b))}),document.addEventListener("mouseup",function(b){return a.endUserStroke()}),document.addEventListener("touchend",function(b){return a.endUserStroke()})}},{key:"startUserStroke",value:function(a){return this.point=a,this.userStroke?this.endUserStroke():(this.userStroke=new j["default"](a,this.options),this.userStroke.setCanvas(this.svg),window.lastUserStroke=this.userStroke,void this.userStroke.draw())}},{key:"continueUserStroke",value:function(a){this.userStroke&&this.userStroke.appendPoint(a)}},{key:"endUserStroke",value:function(){if(this.userStroke){var a=this.positioner.convertExternalPoints(this.userStroke.getPoints()),b=this.character.getMatchingStroke(a);if(this.userStroke.fadeAndRemove(),this.userStroke=null,this.isQuizzing){var c=b&&!n["default"](b,this.drawnStrokes);!c||this.enforceStrokeOrder&&b!==this.character.getStroke(this.currentStrokeIndex)?(this.numRecentMistakes+=1,this.numRecentMistakes>3&&this.character.getStroke(this.currentStrokeIndex).highlight()):(this.drawnStrokes.push(b),this.currentStrokeIndex+=1,this.numRecentMistakes=0,b.show(),this.drawnStrokes.length===this.character.getNumStrokes()&&(this.isQuizzing=!1))}}}},{key:"getMousePoint",value:function(a){return{x:a.offsetX,y:a.offsetY}}},{key:"getTouchPoint",value:function(a){return{x:a.touches[0].pageX-this.svg.node.offsetLeft,y:a.touches[0].pageY-this.svg.node.offsetTop}}},{key:"getHintOptions",value:function(){var a=q._extend({},this.options);return a.strokeAttrs=this.options.hintAttrs,a}}]),a}();"undefined"!=typeof window&&!function(){var a=window.HanziWriter;t.noConflict=function(){return window.HanziWriter=a,t},window.HanziWriter=t}(),b["default"]=t,a.exports=b["default"]},function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=c(2),e=c(5),f=c(4),d=function(a){function b(a,b){var c,d,f,h,i,j;for(this.options=null!=b?b:{},this.strokes=[],f=function(){var b,c,e;for(e=[],b=0,c=a.length;c>b;b++)d=a[b],e.push(new g(d,this.options));return e}.call(this),c=[],i=0,j=f.length;j>i;i++)h=f[i],h.isComplete&&0===c.length?this.strokes.push(h):h.isComplete?(c.push(h),this.strokes.push(new e(c,this.options)),c=[]):c.push(h)}return i(b,a),b.DISTANCE_THRESHOLD=30,b.prototype.getBounds=function(){var a,b,c,d,e,f,g,h,i;return g=this.getAllStrokeBounds(),h=this.getExtremes(this.getAllYs(g)),b=h[0],d=h[1],f=h[2],i=this.getExtremes(this.getAllXs(g)),a=i[0],c=i[1],e=i[2],[{x:e,y:f},{x:a,y:b}]},b.prototype.getAllStrokeBounds=function(){var a,b,c,d,e,f;for(a=[],f=this.strokes,d=0,e=f.length;e>d;d++)b=f[d],c=b.getBounds(),a.push(c[0]),a.push(c[1]);return a},b.prototype.getMatchingStroke=function(a){var c,d,e,f,g,h,i;for(e=null,d=0,i=this.strokes,g=0,h=i.length;h>g;g++)f=i[g],c=f.getAverageDistance(a),(d>c||!e)&&(e=f,d=c);return d<b.DISTANCE_THRESHOLD?e:void 0},b.prototype.show=function(a){var b,c,d,e,f;for(null==a&&(a={}),e=this.strokes,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.show(a));return f},b.prototype.hide=function(a){var b,c,d,e,f;for(null==a&&(a={}),e=this.strokes,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.hide(a));return f},b.prototype.showStroke=function(a,b){return null==b&&(b={}),this.getStroke(a).show(b)},b.prototype.getStroke=function(a){return this.strokes[a]},b.prototype.getNumStrokes=function(){return this.strokes.length},b.prototype.draw=function(){var a,b,c,d,e;for(d=this.strokes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.draw());return e},b.prototype.animate=function(a){return null==a&&(a=function(){}),this.hide({onComplete:function(b){return function(){return b.animateStroke(a,0)}}(this)})},b.prototype.setCanvas=function(a){var c,d,e,f,g;for(b.__super__.setCanvas.apply(this,arguments),f=this.strokes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.setCanvas(a));return g},b.prototype.animateStroke=function(a,b){var c;return c=this.strokes[b],c.animate(function(c){return function(){var d;return b<c.strokes.length-1?(d=function(){return c.animateStroke(a,b+1)},setTimeout(d,c.options.delayBetweenStrokes)):a()}}(this))},b}(f),a.exports=d},function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=c(3),e=function(a){function b(a,b){var c,d,e,f;this.options=null!=b?b:{},f=a.split(":"),c=f[0],d=f[1],d=d.replace(/;?\s*$/,""),this.points=function(){var a,b,c,f;for(c=d.split(";"),f=[],a=0,b=c.length;b>a;a++)e=c[a],f.push(this.parsePoint(e));return f}.call(this),this.isComplete="P"===c[2],this.strokeType=parseInt(c[1]),this.animationSpeedupRatio=1}return g(b,a),b.HORIZONTAL_STROKE=1,b.BACK_SLASH_STROKE=2,b.VERTICAL_STROKE=3,b.FORWARD_SLASH_STROKE=4,b.REVERSE_HORIZONTAL_STROKE=5,b.REVERSE_BACK_SLASH_STROKE=6,b.REVERSE_VERTICAL_STROKE=7,b.REVERSE_FORWARD_SLASH_STROKE=8,b.prototype.getPathString=function(){return b.__super__.getPathString.apply(this,arguments)+" z"},b.prototype.parsePoint=function(a){var b;return b=a.split(","),{x:b[0],y:b[1]}},b.prototype.setAnimationSpeedupRatio=function(a){this.animationSpeedupRatio=a},b.prototype.getDistance=function(a){var b,c,d,e,f;return f=this.getStrokeAnimationStartingPoint(),d=this.getStrokeAnimationEndingPoint(),b=d.x-f.x,c=d.y-f.y,e=this.getStrokeAnimationDistance(),Math.abs(c*a.x-b*a.y-f.x*d.y+f.y*d.x)/e},b.prototype.getAverageDistance=function(a){var b,c,d,e;for(c=0,d=0,e=a.length;e>d;d++)b=a[d],c+=this.getDistance(b);return c/a.length},b.prototype.getStrokeAnimationStartingPoint=function(){return this.getStrokeAnimationExtremePoint(this.strokeType,!1)},b.prototype.getStrokeAnimationEndingPoint=function(){return this.getStrokeAnimationExtremePoint(this.strokeType,!0)},b.prototype.getStrokeAnimationExtremePoint=function(a,c){var d,e,f,g,h;switch(e=this.getExtremes(this.getAllYs(this.points)),d=this.getExtremes(this.getAllXs(this.points)),a>b.FORWARD_SLASH_STROKE&&(a-=b.FORWARD_SLASH_STROKE,c=!c),h=c?0:2,f=c?2:0,g=1,a){case b.HORIZONTAL_STROKE:return{x:d[h],y:e[g]};case b.BACK_SLASH_STROKE:return{x:d[h],y:e[h]};case b.VERTICAL_STROKE:return{x:d[g],y:e[h]};case b.FORWARD_SLASH_STROKE:return{x:d[f],y:e[h]}}},b.prototype.getStrokeAnimationDistance=function(){var a,b;return b=this.getStrokeAnimationStartingPoint(),a=this.getStrokeAnimationEndingPoint(),Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},b.prototype.markAnimationPoints=function(){var a,b;return b=this.getStrokeAnimationStartingPoint(),a=this.getStrokeAnimationEndingPoint(),this.canvas.circle(10).attr({fill:"#9F9"}).move(b.x,b.y),this.canvas.circle(10).attr({fill:"#9F9"}).move(a.x,a.y)},b.prototype.highlight=function(){return this.path.animate(this.options.strokeHighlightDuration).attr({fill:this.options.strokeHighlightColor,stroke:this.options.strokeHighlightColor,opacity:1}).after(function(a){return function(){return a.path.animate(a.options.strokeHighlightDuration).attr({opacity:0}).after(function(){return a.path.attr(a.options.strokeAttrs)})}}(this))},b.prototype.draw=function(){return b.__super__.draw.apply(this,arguments).attr(this.options.strokeAttrs).attr({opacity:0})},b.prototype.show=function(a){return null==a&&(a={}),this.path.animate(a.duration||300).opacity(1).after(a.onComplete||function(){})},b.prototype.hide=function(a){return null==a&&(a={}),this.path.animate(a.duration||300).opacity(0).after(a.onComplete||function(){})},b.prototype.animate=function(a){var b,c;return null==a&&(a=function(){}),c=this.getStrokeAnimationStartingPoint(),b=this.canvas.circle(0).center(c.x,c.y),this.path||this.drawPath(),this.path.attr({opacity:1}).attr(this.options.strokeAttrs).clipWith(b),b.animate(this.options.strokeAnimationDuration/this.animationSpeedupRatio).radius(this.getStrokeAnimationDistance()).after(a)},b}(d),a.exports=e},function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=c(4),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.getPathString=function(){var a,b,c,d,e,f;for(d=this.points[0],c=this.points.slice(1),a="M "+d.x+" "+d.y,e=0,f=c.length;f>e;e++)b=c[e],a+=" L "+b.x+" "+b.y;return a},b.prototype.drawPath=function(){return this.path=this.canvas.path(this.getPathString())},b.prototype.getPoints=function(){return this.points},b.prototype.getBounds=function(){var a,b,c,d,e,f,g,h;return g=this.getExtremes(this.getAllYs(this.points)),b=g[0],d=g[1],f=g[2],h=this.getExtremes(this.getAllXs(this.points)),a=h[0],c=h[1],e=h[2],[{x:e,y:f},{x:a,y:b}]},b.prototype.draw=function(){return this.drawPath()},b}(d),a.exports=e},function(a,b){var c;c=function(){function a(){}return a.prototype.draw=function(){},a.prototype.animate=function(a){null==a&&(a=function(){})},a.prototype.getBounds=function(){},a.prototype.setCanvas=function(a){this.canvas=a},a.prototype.getExtremes=function(a){var b,c,d;return b=Math.max.apply(null,a),d=Math.min.apply(null,a),c=(b+d)/2,[b,c,d]},a.prototype.getAllXs=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(b.x);return e},a.prototype.getAllYs=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(b.y);return e},a}(),a.exports=c},function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=c(4),d=function(a){function b(a,b){var c,d,e,f;for(this.strokes=a,this.options=null!=b?b:{},f=this.strokes,d=0,e=f.length;e>d;d++)c=f[d],c.setAnimationSpeedupRatio(this.strokes.length)}return g(b,a),b.prototype.show=function(a){var b,c,d,e,f;for(null==a&&(a={}),e=this.strokes,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.show(a));return f},b.prototype.hide=function(a){var b,c,d,e,f;for(null==a&&(a={}),e=this.strokes,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.hide(a));return f},b.prototype.draw=function(){var a,b,c,d,e;for(d=this.strokes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.draw(this.canvas));return e},b.prototype.animate=function(a){return null==a&&(a=function(){}),this.animateStroke(a,0)},b.prototype.getDistance=function(a){var b,c;return b=function(){var b,d,e,f;for(e=this.strokes,f=[],b=0,d=e.length;d>b;b++)c=e[b],f.push(c.getDistance(a));return f}.call(this),Math.min.apply(Math,b)},b.prototype.getAverageDistance=function(a){var b,c,d,e;for(c=0,d=0,e=a.length;e>d;d++)b=a[d],c+=this.getDistance(b);return c/a.length},b.prototype.getBounds=function(){var a,b,c,d,e,f,g,h,i;return g=this.getAllStrokeBounds(),h=this.getExtremes(this.getAllYs(g)),b=h[0],d=h[1],f=h[2],i=this.getExtremes(this.getAllXs(g)),a=i[0],c=i[1],e=i[2],[{x:e,y:f},{x:a,y:b}]},b.prototype.getAllStrokeBounds=function(){var a,b,c,d,e,f;for(a=[],f=this.strokes,d=0,e=f.length;e>d;d++)b=f[d],c=b.getBounds(),a.push(c[0]),a.push(c[1]);return a},b.prototype.setCanvas=function(a){var c,d,e,f,g;for(b.__super__.setCanvas.apply(this,arguments),f=this.strokes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.setCanvas(a));return g},b.prototype.highlight=function(){var a,b,c,d,e;for(d=this.strokes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.highlight());return e},b.prototype.animateStroke=function(a,b){var c;return c=this.strokes[b],c.animate(function(c){return function(){return b<c.strokes.length-1?c.animateStroke(a,b+1):a()}}(this))},b}(e),a.exports=d},function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=c(3),e=function(a){function b(a,b){this.options=null!=b?b:{},this.points=[a]}return g(b,a),b.prototype.appendPoint=function(a){return this.points.push(a),this.path.plot(this.getPathString())},b.prototype.animate=function(a){return null==a&&(a=function(){}),a()},b.prototype.draw=function(){return b.__super__.draw.apply(this,arguments).attr(this.options.userStrokeAttrs)},b.prototype.fadeAndRemove=function(){return this.path.animate(this.options.userStrokeFadeDuration).attr({opacity:0}).after(function(a){return function(){return a.path.remove()}}(this))},b}(d),a.exports=e},function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=c(4),d=function(a){function b(a,b){this.character=a,this.options=null!=b?b:{}}return g(b,a),b.prototype.getBounds=function(){return this.character.getBounds()},b.prototype.convertExternalPoints=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.convertExternalPoint(b));return e},b.prototype.convertExternalPoint=function(a){return{x:(a.x-this.xOffset)/this.scale,y:(a.y-this.yOffset)/this.scale}},b.prototype.getNestedCanvas=function(){return this.calculateScaleAndOffset(),this.canvas.group().move(this.xOffset,this.yOffset).transform({scaleX:this.scale,scaleY:this.scale})},b.prototype.calculateScaleAndOffset=function(){var a,b,c,d,e,f,g,h,i;return a=this.getBounds(),e=a[1].x-a[0].x,d=a[1].y-a[0].y,c=this.options.width-2*this.options.padding,b=this.options.height-2*this.options.padding,f=c/e,g=b/d,this.scale=Math.min(f,g),h=this.options.padding+(c-this.scale*e)/2,i=this.options.padding+(b-this.scale*d)/2,this.xOffset=-1*a[0].x*this.scale+h,this.yOffset=-1*a[0].y*this.scale+i},b.prototype.draw=function(){return this.character.draw()},b.prototype.animate=function(a,b){return null==b&&(b=function(){}),this.character.animate(b)},b.prototype.setCanvas=function(a){return b.__super__.setCanvas.apply(this,arguments),this.character.setCanvas(this.getNestedCanvas())},b}(e),a.exports=d},function(a,b){"use strict";function c(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(a===h)return!0}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return!1}Object.defineProperty(b,"__esModule",{value:!0}),b.inArray=c},function(a,b,c){var d,e;!function(f,g){d=g,e="function"==typeof d?d.call(b,c,b,a):d,!(void 0!==e&&(a.exports=e))}(void 0,function(){function a(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function b(a){return 4==a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a}function c(a){var b=a.toString(16);return 1==b.length?"0"+b:b}function d(a,b,c){return(null==b||null==c)&&(null==c?c=a.height/a.width*b:null==b&&(b=a.width/a.height*c)),{width:b,height:c}}function e(a,b){return"number"==typeof a.from?a.from+(a.to-a.from)*b:a instanceof j.Color||a instanceof j.Number?a.at(b):1>b?a.from:a.to}function f(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b][0],null!=a[b][1]&&(d+=a[b][1],null!=a[b][2]&&(d+=" ",d+=a[b][2],null!=a[b][3]&&(d+=" ",d+=a[b][3],d+=" ",d+=a[b][4],null!=a[b][5]&&(d+=" ",d+=a[b][5],d+=" ",d+=a[b][6],null!=a[b][7]&&(d+=" ",d+=a[b][7])))));return d+" "}function g(a){a.x2=a.x+a.width,a.y2=a.y+a.height,a.cx=a.x+a.width/2,a.cy=a.y+a.height/2}function h(a){if(a.matrix){var b=a.matrix.replace(/\s/g,"").split(",");6==b.length&&(a.a=parseFloat(b[0]),a.b=parseFloat(b[1]),a.c=parseFloat(b[2]),a.d=parseFloat(b[3]),a.e=parseFloat(b[4]),a.f=parseFloat(b[5]))}return a}function i(a){var b=a.toString().match(j.regex.reference);return b?b[1]:void 0}var j=this.SVG=function(a){return j.supported?(a=new j.Doc(a),j.parser||j.prepare(a),a):void 0};if(j.ns="http://www.w3.org/2000/svg",j.xmlns="http://www.w3.org/2000/xmlns/",j.xlink="http://www.w3.org/1999/xlink",j.did=1e3,j.eid=function(a){return"Svgjs"+a.charAt(0).toUpperCase()+a.slice(1)+j.did++},j.create=function(a){var b=document.createElementNS(this.ns,a);return b.setAttribute("id",this.eid(a)),b},j.extend=function(){var a,b,c,d;for(a=[].slice.call(arguments),b=a.pop(),d=a.length-1;d>=0;d--)if(a[d])for(c in b)a[d].prototype[c]=b[c];j.Set&&j.Set.inherit&&j.Set.inherit()},j.prepare=function(a){var b=document.getElementsByTagName("body")[0],c=(b?new j.Doc(b):a.nested()).size(2,0),d=j.create("path");c.node.appendChild(d),j.parser={body:b||a.parent,draw:c.style("opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),poly:c.polyline().node,path:d}},j.supported=function(){return!!document.createElementNS&&!!document.createElementNS(j.ns,"svg").createSVGRect}(),!j.supported)return!1;if(j.get=function(a){var b=document.getElementById(i(a)||a);return b?b.instance:void 0},j.invent=function(a){var b="function"==typeof a.create?a.create:function(){this.constructor.call(this,j.create(a.create))};return a.inherit&&(b.prototype=new a.inherit),a.extend&&j.extend(b,a.extend),a.construct&&j.extend(a.parent||j.Container,a.construct),b},"function"!=typeof k){var k=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};k.prototype=window.Event.prototype,window.CustomEvent=k}!function(a){for(var b=0,c=["moz","webkit"],d=0;d<c.length&&!window.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame=a.requestAnimationFrame||function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f},a.cancelAnimationFrame=a.cancelAnimationFrame||a.clearTimeout}(window),j.regex={unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif)(\?[^=]+.*)?/i,isEvent:/^[\w]+:[\w]+$/},j.defaults={matrix:"1 0 0 1 0 0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},j.Color=function(a){var c;this.r=0,this.g=0,this.b=0,"string"==typeof a?j.regex.isRgb.test(a)?(c=j.regex.rgb.exec(a.replace(/\s/g,"")),this.r=parseInt(c[1]),this.g=parseInt(c[2]),this.b=parseInt(c[3])):j.regex.isHex.test(a)&&(c=j.regex.hex.exec(b(a)),this.r=parseInt(c[1],16),this.g=parseInt(c[2],16),this.b=parseInt(c[3],16)):"object"==typeof a&&(this.r=a.r,this.g=a.g,this.b=a.b)},j.extend(j.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+c(this.r)+c(this.g)+c(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(a){return this.destination=new j.Color(a),this},at:function(a){return this.destination?(a=0>a?0:a>1?1:a,new j.Color({r:~~(this.r+(this.destination.r-this.r)*a),g:~~(this.g+(this.destination.g-this.g)*a),b:~~(this.b+(this.destination.b-this.b)*a)})):this}}),j.Color.test=function(a){return a+="",j.regex.isHex.test(a)||j.regex.isRgb.test(a)},j.Color.isRgb=function(a){return a&&"number"==typeof a.r&&"number"==typeof a.g&&"number"==typeof a.b},j.Color.isColor=function(a){return j.Color.isRgb(a)||j.Color.test(a)},j.Array=function(a,b){a=(a||[]).valueOf(),0==a.length&&b&&(a=b.valueOf()),this.value=this.parse(a)},j.extend(j.Array,{morph:function(a){if(this.destination=this.parse(a),this.value.length!=this.destination.length){for(var b=this.value[this.value.length-1],c=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(c);for(;this.value.length<this.destination.length;)this.value.push(b)}return this},settle:function(){for(var a=0,b=this.value.length,c=[];b>a;a++)-1==c.indexOf(this.value[a])&&c.push(this.value[a]);return this.value=c},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];c>b;b++)d.push(this.value[b]+(this.destination[b]-this.value[b])*a);return new j.Array(d)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(a){return a=a.valueOf(),Array.isArray(a)?a:this.split(a)},split:function(a){return a.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" ")},reverse:function(){return this.value.reverse(),this}}),j.PointArray=function(){this.constructor.apply(this,arguments)},j.PointArray.prototype=new j.Array,j.extend(j.PointArray,{toString:function(){for(var a=0,b=this.value.length,c=[];b>a;a++)c.push(this.value[a].join(","));return c.join(" ")},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];c>b;b++)d.push([this.value[b][0]+(this.destination[b][0]-this.value[b][0])*a,this.value[b][1]+(this.destination[b][1]-this.value[b][1])*a]);return new j.PointArray(d)},parse:function(a){if(a=a.valueOf(),Array.isArray(a))return a;a=this.split(a);for(var b,c=0,d=a.length,e=[];d>c;c++)b=a[c].split(","),e.push([parseFloat(b[0]),parseFloat(b[1])]);return e},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d=this.value.length-1;d>=0;d--)this.value[d]=[this.value[d][0]+a,this.value[d][1]+b];return this},size:function(a,b){var c,d=this.bbox();for(c=this.value.length-1;c>=0;c--)this.value[c][0]=(this.value[c][0]-d.x)*a/d.width+d.x,this.value[c][1]=(this.value[c][1]-d.y)*b/d.height+d.y;return this},bbox:function(){return j.parser.poly.setAttribute("points",this.toString()),j.parser.poly.getBBox()}}),j.PathArray=function(a,b){this.constructor.call(this,a,b)},j.PathArray.prototype=new j.Array,j.extend(j.PathArray,{toString:function(){return f(this.value)},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d,e=this.value.length-1;e>=0;e--)d=this.value[e][0],"M"==d||"L"==d||"T"==d?(this.value[e][1]+=a,this.value[e][2]+=b):"H"==d?this.value[e][1]+=a:"V"==d?this.value[e][1]+=b:"C"==d||"S"==d||"Q"==d?(this.value[e][1]+=a,this.value[e][2]+=b,this.value[e][3]+=a,this.value[e][4]+=b,"C"==d&&(this.value[e][5]+=a,this.value[e][6]+=b)):"A"==d&&(this.value[e][6]+=a,this.value[e][7]+=b);return this},size:function(a,b){var c,d,e=this.bbox();for(c=this.value.length-1;c>=0;c--)d=this.value[c][0],"M"==d||"L"==d||"T"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y):"H"==d?this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x:"V"==d?this.value[c][1]=(this.value[c][1]-e.y)*b/e.height+e.y:"C"==d||"S"==d||"Q"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y,this.value[c][3]=(this.value[c][3]-e.x)*a/e.width+e.x,this.value[c][4]=(this.value[c][4]-e.y)*b/e.height+e.y,"C"==d&&(this.value[c][5]=(this.value[c][5]-e.x)*a/e.width+e.x,this.value[c][6]=(this.value[c][6]-e.y)*b/e.height+e.y)):"A"==d&&(this.value[c][1]=this.value[c][1]*a/e.width,this.value[c][2]=this.value[c][2]*b/e.height,this.value[c][6]=(this.value[c][6]-e.x)*a/e.width+e.x,this.value[c][7]=(this.value[c][7]-e.y)*b/e.height+e.y);return this},parse:function(a){if(a instanceof j.PathArray)return a.valueOf();var b,c,d,e,g,h,i,k,l,m,n,o=0,p=0;for(j.parser.path.setAttribute("d","string"==typeof a?a:f(a)),n=j.parser.path.pathSegList,b=0,c=n.numberOfItems;c>b;++b)m=n.getItem(b),l=m.pathSegTypeAsLetter,"M"==l||"L"==l||"H"==l||"V"==l||"C"==l||"S"==l||"Q"==l||"T"==l||"A"==l?("x"in m&&(o=m.x),"y"in m&&(p=m.y)):("x1"in m&&(g=o+m.x1),"x2"in m&&(i=o+m.x2),"y1"in m&&(h=p+m.y1),"y2"in m&&(k=p+m.y2),"x"in m&&(o+=m.x),"y"in m&&(p+=m.y),"m"==l?n.replaceItem(j.parser.path.createSVGPathSegMovetoAbs(o,p),b):"l"==l?n.replaceItem(j.parser.path.createSVGPathSegLinetoAbs(o,p),b):"h"==l?n.replaceItem(j.parser.path.createSVGPathSegLinetoHorizontalAbs(o),b):"v"==l?n.replaceItem(j.parser.path.createSVGPathSegLinetoVerticalAbs(p),b):"c"==l?n.replaceItem(j.parser.path.createSVGPathSegCurvetoCubicAbs(o,p,g,h,i,k),b):"s"==l?n.replaceItem(j.parser.path.createSVGPathSegCurvetoCubicSmoothAbs(o,p,i,k),b):"q"==l?n.replaceItem(j.parser.path.createSVGPathSegCurvetoQuadraticAbs(o,p,g,h),b):"t"==l?n.replaceItem(j.parser.path.createSVGPathSegCurvetoQuadraticSmoothAbs(o,p),b):"a"==l?n.replaceItem(j.parser.path.createSVGPathSegArcAbs(o,p,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),b):("z"==l||"Z"==l)&&(o=d,p=e)),("M"==l||"m"==l)&&(d=o,e=p);for(a=[],n=j.parser.path.pathSegList,b=0,c=n.numberOfItems;c>b;++b)m=n.getItem(b),l=m.pathSegTypeAsLetter,o=[l],"M"==l||"L"==l||"T"==l?o.push(m.x,m.y):"H"==l?o.push(m.x):"V"==l?o.push(m.y):"C"==l?o.push(m.x1,m.y1,m.x2,m.y2,m.x,m.y):"S"==l?o.push(m.x2,m.y2,m.x,m.y):"Q"==l?o.push(m.x1,m.y1,m.x,m.y):"A"==l&&o.push(m.r1,m.r2,m.angle,0|m.largeArcFlag,0|m.sweepFlag,m.x,m.y),a.push(o);return a},bbox:function(){return j.parser.path.setAttribute("d",this.toString()),j.parser.path.getBBox()}}),j.Number=function(a){if(this.value=0,this.unit="","number"==typeof a)this.value=isNaN(a)?0:isFinite(a)?a:0>a?-3.4e38:3.4e38;else if("string"==typeof a){var b=a.match(j.regex.unit);b&&(this.value=parseFloat(b[1]),"%"==b[2]?this.value/=100:"s"==b[2]&&(this.value*=1e3),this.unit=b[2])}else a instanceof j.Number&&(this.value=a.value,this.unit=a.unit)},j.extend(j.Number,{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},valueOf:function(){return this.value},plus:function(a){return this.value=this+new j.Number(a),this},minus:function(a){return this.plus(-new j.Number(a))},times:function(a){return this.value=this*new j.Number(a),this},divide:function(a){return this.value=this/new j.Number(a),this},to:function(a){return"string"==typeof a&&(this.unit=a),this},morph:function(a){return this.destination=new j.Number(a),this},at:function(a){return this.destination?new j.Number(this.destination).minus(this).times(a).plus(this):this}}),j.ViewBox=function(a){var b,c,d,e,f=1,g=1,h=a.bbox(),i=(a.attr("viewBox")||"").match(/-?[\d\.]+/g),k=a,l=a;for(d=new j.Number(a.width()),e=new j.Number(a.height());"%"==d.unit;)f*=d.value,d=new j.Number(k instanceof j.Doc?k.parent.offsetWidth:k.parent.width()),k=k.parent;for(;"%"==e.unit;)g*=e.value,e=new j.Number(l instanceof j.Doc?l.parent.offsetHeight:l.parent.height()),l=l.parent;this.x=h.x,this.y=h.y,this.width=d*f,this.height=e*g,this.zoom=1,i&&(b=parseFloat(i[0]),c=parseFloat(i[1]),d=parseFloat(i[2]),e=parseFloat(i[3]),this.zoom=this.width/this.height>d/e?this.height/e:this.width/d,this.x=b,this.y=c,this.width=d,this.height=e)},j.extend(j.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),j.BBox=function(a){var b;if(this.x=0,this.y=0,this.width=0,this.height=0,a){try{b=a.node.getBBox()}catch(c){b={x:a.node.clientLeft,y:a.node.clientTop,width:a.node.clientWidth,height:a.node.clientHeight}}this.x=b.x+a.trans.x,this.y=b.y+a.trans.y,this.width=b.width*a.trans.scaleX,this.height=b.height*a.trans.scaleY}g(this)},j.extend(j.BBox,{merge:function(a){var b=new j.BBox;return b.x=Math.min(this.x,a.x),b.y=Math.min(this.y,a.y),b.width=Math.max(this.x+this.width,a.x+a.width)-b.x,b.height=Math.max(this.y+this.height,a.y+a.height)-b.y,g(b),b}}),j.RBox=function(a){var b,c,d={};if(this.x=0,this.y=0,this.width=0,this.height=0,a){for(b=a.doc().parent,c=a.doc().viewbox().zoom,d=a.node.getBoundingClientRect(),this.x=d.left,this.y=d.top,this.x-=b.offsetLeft,this.y-=b.offsetTop;b=b.offsetParent;)this.x-=b.offsetLeft,this.y-=b.offsetTop;for(b=a;b=b.parent;)"svg"==b.type&&b.viewbox&&(c*=b.viewbox().zoom,this.x-=b.x()||0,this.y-=b.y()||0)}this.x/=c,this.y/=c,this.width=d.width/=c,this.height=d.height/=c,this.x+="number"==typeof window.scrollX?window.scrollX:window.pageXOffset,this.y+="number"==typeof window.scrollY?window.scrollY:window.pageYOffset,g(this)},j.extend(j.RBox,{merge:function(a){var b=new j.RBox;return b.x=Math.min(this.x,a.x),b.y=Math.min(this.y,a.y),b.width=Math.max(this.x+this.width,a.x+a.width)-b.x,b.height=Math.max(this.y+this.height,a.y+a.height)-b.y,g(b),b}}),j.Element=j.invent({create:function(a){this._stroke=j.defaults.attrs.stroke,this.trans=j.defaults.trans(),(this.node=a)&&(this.type=a.nodeName,this.node.instance=this)},extend:{x:function(a){return null!=a&&(a=new j.Number(a),a.value/=this.trans.scaleX),this.attr("x",a)},y:function(a){return null!=a&&(a=new j.Number(a),a.value/=this.trans.scaleY),this.attr("y",a)},cx:function(a){return null==a?this.x()+this.width()/2:this.x(a-this.width()/2)},cy:function(a){return null==a?this.y()+this.height()/2:this.y(a-this.height()/2);
},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},width:function(a){return this.attr("width",a)},height:function(a){return this.attr("height",a)},size:function(a,b){var c=d(this.bbox(),a,b);return this.width(new j.Number(c.width)).height(new j.Number(c.height))},clone:function m(){var m,a,b=this.type;return m="rect"==b||"ellipse"==b?this.parent[b](0,0):"line"==b?this.parent[b](0,0,0,0):"image"==b?this.parent[b](this.src):"text"==b?this.parent[b](this.content):"path"==b?this.parent[b](this.attr("d")):"polyline"==b||"polygon"==b?this.parent[b](this.attr("points")):"g"==b?this.parent.group():this.parent[b](),a=this.attr(),delete a.id,m.attr(a),m.trans=this.trans,m.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},replace:function(a){return this.after(a).remove(),a},addTo:function(a){return a.put(this)},putIn:function(a){return a.add(this)},doc:function(a){return this._parent(a||j.Doc)},attr:function(a,b,c){if(null==a){for(a={},b=this.node.attributes,c=b.length-1;c>=0;c--)a[b[c].nodeName]=j.regex.isNumber.test(b[c].nodeValue)?parseFloat(b[c].nodeValue):b[c].nodeValue;return a}if("object"==typeof a)for(b in a)this.attr(b,a[b]);else if(null===b)this.node.removeAttribute(a);else{if(null==b)return b=this.node.attributes[a],null==b?j.defaults.attrs[a]:j.regex.isNumber.test(b.nodeValue)?parseFloat(b.nodeValue):b.nodeValue;if("style"==a)return this.style(b);"stroke-width"==a?this.attr("stroke",parseFloat(b)>0?this._stroke:null):"stroke"==a&&(this._stroke=b),("fill"==a||"stroke"==a)&&(j.regex.isImage.test(b)&&(b=this.doc().defs().image(b,0,0)),b instanceof j.Image&&(b=this.doc().defs().pattern(0,0,function(){this.add(b)}))),"number"==typeof b?b=new j.Number(b):j.Color.isColor(b)?b=new j.Color(b):Array.isArray(b)&&(b=new j.Array(b)),"leading"==a?this.leading&&this.leading(b):"string"==typeof c?this.node.setAttributeNS(c,a,b.toString()):this.node.setAttribute(a,b.toString()),!this.rebuild||"font-size"!=a&&"x"!=a||this.rebuild(a,b)}return this},transform:function n(a,b){if(0==arguments.length)return this.trans;if("string"==typeof a){if(arguments.length<2)return this.trans[a];var n={};return n[a]=b,this.transform(n)}var n=[];a=h(a);for(b in a)null!=a[b]&&(this.trans[b]=a[b]);return this.trans.matrix=this.trans.a+" "+this.trans.b+" "+this.trans.c+" "+this.trans.d+" "+this.trans.e+" "+this.trans.f,a=this.trans,a.matrix!=j.defaults.matrix&&n.push("matrix("+a.matrix+")"),0!=a.rotation&&n.push("rotate("+a.rotation+" "+(null==a.cx?this.bbox().cx:a.cx)+" "+(null==a.cy?this.bbox().cy:a.cy)+")"),(1!=a.scaleX||1!=a.scaleY)&&n.push("scale("+a.scaleX+" "+a.scaleY+")"),0!=a.skewX&&n.push("skewX("+a.skewX+")"),0!=a.skewY&&n.push("skewY("+a.skewY+")"),(0!=a.x||0!=a.y)&&n.push("translate("+new j.Number(a.x/a.scaleX)+" "+new j.Number(a.y/a.scaleY)+")"),0==n.length?this.node.removeAttribute("transform"):this.node.setAttribute("transform",n.join(" ")),this},style:function(b,c){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof b)for(c in b)this.style(c,b[c]);else{if(!j.regex.isCss.test(b))return this.node.style[a(b)];b=b.split(";");for(var d=0;d<b.length;d++)c=b[d].split(":"),this.style(c[0].replace(/\s+/g,""),c[1])}else this.node.style[a(b)]=null===c||j.regex.isBlank.test(c)?"":c;return this},id:function(a){return this.attr("id",a)},bbox:function(){return new j.BBox(this)},rbox:function(){return new j.RBox(this)},inside:function(a,b){var c=this.bbox();return a>c.x&&b>c.y&&a<c.x+c.width&&b<c.y+c.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var a=this.node.getAttribute("class");return null===a?[]:a.trim().split(/\s+/)},hasClass:function(a){return-1!=this.classes().indexOf(a)},addClass:function(a){var b;return this.hasClass(a)||(b=this.classes(),b.push(a),this.node.setAttribute("class",b.join(" "))),this},removeClass:function(a){var b;return this.hasClass(a)&&(b=this.classes().filter(function(b){return b!=a}),this.node.setAttribute("class",b.join(" "))),this},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a),this},reference:function(a){return j.get(this.attr()[a])},_parent:function(a){for(var b=this;null!=b&&!(b instanceof a);)b=b.parent;return b}}}),j.Parent=j.invent({create:function(a){this.constructor.call(this,a)},inherit:j.Element,extend:{children:function(){return this._children||(this._children=[])},add:function(a,b){return this.has(a)||(b=null==b?this.children().length:b,a.parent&&a.parent.children().splice(a.parent.index(a),1),this.children().splice(b,0,a),this.node.insertBefore(a.node,this.node.childNodes[b]||null),a.parent=this),this._defs&&(this.node.removeChild(this._defs.node),this.node.appendChild(this._defs.node)),this},put:function(a,b){return this.add(a,b),a},has:function(a){return this.index(a)>=0},index:function(a){return this.children().indexOf(a)},get:function(a){return this.children()[a]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(a,b){var c,d,e=this.children();for(c=0,d=e.length;d>c;c++)e[c]instanceof j.Element&&a.apply(e[c],[c,e]),b&&e[c]instanceof j.Container&&e[c].each(a,b);return this},removeElement:function(a){return this.children().splice(this.index(a),1),this.node.removeChild(a.node),a.parent=null,this},clear:function(){for(var a=this.children().length-1;a>=0;a--)this.removeElement(this.children()[a]);return this._defs&&this._defs.clear(),this},defs:function(){return this.doc().defs()}}}),j.Container=j.invent({create:function(a){this.constructor.call(this,a)},inherit:j.Parent,extend:{viewbox:function(a){return 0==arguments.length?new j.ViewBox(this):(a=1==arguments.length?[a.x,a.y,a.width,a.height]:[].slice.call(arguments),this.attr("viewBox",a))}}}),j.FX=j.invent({create:function(a){this.target=a},extend:{animate:function(a,b,c){var d,f,g,h,i=this.target,k=this;return"object"==typeof a&&(c=a.delay,b=a.ease,a=a.duration),a="="==a?a:null==a?1e3:new j.Number(a).valueOf(),b=b||"<>",k.to=function(a){var c;if(a=0>a?0:a>1?1:a,null==d){d=[];for(h in k.attrs)d.push(h);if(i.morphArray&&(k._plot||d.indexOf("points")>-1)){var j,l=new i.morphArray(k._plot||k.attrs.points||i.array);k._size&&l.size(k._size.width.to,k._size.height.to),j=l.bbox(),k._x?l.move(k._x.to,j.y):k._cx&&l.move(k._cx.to-j.width/2,j.y),j=l.bbox(),k._y?l.move(j.x,k._y.to):k._cy&&l.move(j.x,k._cy.to-j.height/2),delete k._x,delete k._y,delete k._cx,delete k._cy,delete k._size,k._plot=i.array.morph(l)}}if(null==f){f=[];for(h in k.trans)f.push(h)}if(null==g){g=[];for(h in k.styles)g.push(h)}for(a="<>"==b?-Math.cos(a*Math.PI)/2+.5:">"==b?Math.sin(a*Math.PI/2):"<"==b?-Math.cos(a*Math.PI/2)+1:"-"==b?a:"function"==typeof b?b(a):a,k._plot?i.plot(k._plot.at(a)):(k._x?i.x(k._x.at(a)):k._cx&&i.cx(k._cx.at(a)),k._y?i.y(k._y.at(a)):k._cy&&i.cy(k._cy.at(a)),k._size&&i.size(k._size.width.at(a),k._size.height.at(a))),k._viewbox&&i.viewbox(k._viewbox.x.at(a),k._viewbox.y.at(a),k._viewbox.width.at(a),k._viewbox.height.at(a)),k._leading&&i.leading(k._leading.at(a)),c=d.length-1;c>=0;c--)i.attr(d[c],e(k.attrs[d[c]],a));for(c=f.length-1;c>=0;c--)i.transform(f[c],e(k.trans[f[c]],a));for(c=g.length-1;c>=0;c--)i.style(g[c],e(k.styles[g[c]],a));k._during&&k._during.call(i,a,function(b,c){return e({from:b,to:c},a)})},"number"==typeof a&&(this.timeout=setTimeout(function(){var d=(new Date).getTime();k.situation={interval:1e3/60,start:d,play:!0,finish:d+a,duration:a},k.render=function(){if(k.situation.play===!0){var d=(new Date).getTime(),e=d>k.situation.finish?1:(d-k.situation.start)/a;k.to(e),d>k.situation.finish?(k._plot&&i.plot(new j.PointArray(k._plot.destination).settle()),k._loop===!0||"number"==typeof k._loop&&k._loop>1?("number"==typeof k._loop&&--k._loop,k.animate(a,b,c)):k._after?k._after.apply(i,[k]):k.stop()):k.animationFrame=requestAnimationFrame(k.render)}else k.animationFrame=requestAnimationFrame(k.render)},k.render()},new j.Number(c).valueOf())),this},bbox:function(){return this.target.bbox()},attr:function(a,b){if("object"==typeof a)for(var c in a)this.attr(c,a[c]);else{var d=this.target.attr(a);this.attrs[a]=j.Color.isColor(d)?new j.Color(d).morph(b):j.regex.unit.test(d)?new j.Number(d).morph(b):{from:d,to:b}}return this},transform:function o(a,b){if(1==arguments.length){a=h(a),delete a.matrix,this.target.trans.cx=a.cx||null,this.target.trans.cy=a.cy||null,delete a.cx,delete a.cy;for(b in a)this.trans[b]={from:this.target.trans[b],to:a[b]}}else{var o={};o[a]=b,this.transform(o)}return this},style:function(a,b){if("object"==typeof a)for(var c in a)this.style(c,a[c]);else this.styles[a]={from:this.target.style(a),to:b};return this},x:function(a){return this._x=new j.Number(this.target.x()).morph(a),this},y:function(a){return this._y=new j.Number(this.target.y()).morph(a),this},cx:function(a){return this._cx=new j.Number(this.target.cx()).morph(a),this},cy:function(a){return this._cy=new j.Number(this.target.cy()).morph(a),this},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){if(this.target instanceof j.Text)this.attr("font-size",a);else{var c=this.target.bbox();this._size={width:new j.Number(c.width).morph(a),height:new j.Number(c.height).morph(b)}}return this},plot:function(a){return this._plot=a,this},leading:function(a){return this.target._leading&&(this._leading=new j.Number(this.target._leading).morph(a)),this},viewbox:function(a,b,c,d){if(this.target instanceof j.Container){var e=this.target.viewbox();this._viewbox={x:new j.Number(e.x).morph(a),y:new j.Number(e.y).morph(b),width:new j.Number(e.width).morph(c),height:new j.Number(e.height).morph(d)}}return this},update:function(a){return this.target instanceof j.Stop&&(null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new j.Number(a.offset))),this},during:function(a){return this._during=a,this},after:function(a){return this._after=a,this},loop:function(a){return this._loop=a||!0,this},stop:function(a){return a===!0?(this.animate(0),this._after&&this._after.apply(this.target,[this])):(clearTimeout(this.timeout),cancelAnimationFrame(this.animationFrame),this.attrs={},this.trans={},this.styles={},this.situation={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._plot,delete this._loop,delete this._after,delete this._during,delete this._leading,delete this._viewbox),this},pause:function(){return this.situation.play===!0&&(this.situation.play=!1,this.situation.pause=(new Date).getTime()),this},play:function(){if(this.situation.play===!1){var a=(new Date).getTime()-this.situation.pause;this.situation.finish+=a,this.situation.start+=a,this.situation.play=!0}return this}},parent:j.Element,construct:{animate:function(a,b,c){return(this.fx||(this.fx=new j.FX(this))).stop().animate(a,b,c)},stop:function(a){return this.fx&&this.fx.stop(a),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this}}}),j.extend(j.Element,j.FX,{dx:function(a){return this.x((this.target||this).x()+a)},dy:function(a){return this.y((this.target||this).y()+a)},dmove:function(a,b){return this.dx(a).dy(b)}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(a){j.Element.prototype[a]=function(b){var c=this;return this.node["on"+a]="function"==typeof b?function(){return b.apply(c,arguments)}:null,this}}),j.listeners=[],j.handlerMap=[],j.registerEvent=function(){},j.on=function(a,b,c){var d=c.bind(a.instance||a),e=(j.handlerMap.indexOf(a)+1||j.handlerMap.push(a))-1,f=b.split(".")[0],g=b.split(".")[1]||"*";j.listeners[e]=j.listeners[e]||{},j.listeners[e][f]=j.listeners[e][f]||{},j.listeners[e][f][g]=j.listeners[e][f][g]||{},j.listeners[e][f][g][c]=d,a.addEventListener(f,d,!1)},j.off=function(a,b,c){var d=j.handlerMap.indexOf(a),e=b&&b.split(".")[0],f=b&&b.split(".")[1];if(-1!=d)if(c)j.listeners[d][e]&&j.listeners[d][e][f||"*"]&&(a.removeEventListener(e,j.listeners[d][e][f||"*"][c],!1),delete j.listeners[d][e][f||"*"][c]);else if(f){if(j.listeners[d][e]&&j.listeners[d][e][f]){for(c in j.listeners[d][e][f])j.off(a,[e,f].join("."),c);delete j.listeners[d][e][f]}}else if(e){if(j.listeners[d][e]){for(namespace in j.listeners[d][e])j.off(a,[e,namespace].join("."));delete j.listeners[d][e]}}else{for(b in j.listeners[d])j.off(a,b);delete j.listeners[d]}},j.extend(j.Element,{on:function(a,b){return j.on(this.node,a,b),this},off:function(a,b){return j.off(this.node,a,b),this},fire:function(a,b){return this.node.dispatchEvent(new k(a,{detail:b})),this}}),j.Defs=j.invent({create:"defs",inherit:j.Container}),j.G=j.invent({create:"g",inherit:j.Container,extend:{x:function(a){return null==a?this.trans.x:this.transform("x",a)},y:function(a){return null==a?this.trans.y:this.transform("y",a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)}},construct:{group:function(){return this.put(new j.G)}}}),j.extend(j.Element,{siblings:function(){return this.parent.children()},position:function(){return this.parent.index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var a=this.position();return this.parent.removeElement(this).put(this,a+1)},backward:function(){var a=this.position();return a>0&&this.parent.removeElement(this).add(this,a-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.position()>0&&this.parent.removeElement(this).add(this,0),this},before:function(a){a.remove();var b=this.position();return this.parent.add(a,b),this},after:function(a){a.remove();var b=this.position();return this.parent.add(a,b+1),this}}),j.Mask=j.invent({create:function(){this.constructor.call(this,j.create("mask")),this.targets=[]},inherit:j.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unmask();return delete this.targets,this.parent.removeElement(this),this}},construct:{mask:function(){return this.defs().put(new j.Mask)}}}),j.extend(j.Element,{maskWith:function(a){return this.masker=a instanceof j.Mask?a:this.parent.mask().add(a),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),j.Clip=j.invent({create:function(){this.constructor.call(this,j.create("clipPath")),this.targets=[]},inherit:j.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unclip();return delete this.targets,this.parent.removeElement(this),this}},construct:{clip:function(){return this.defs().put(new j.Clip)}}}),j.extend(j.Element,{clipWith:function(a){return this.clipper=a instanceof j.Clip?a:this.parent.clip().add(a),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),j.Gradient=j.invent({create:function(a){this.constructor.call(this,j.create(a+"Gradient")),this.type=a},inherit:j.Container,extend:{from:function(a,b){return"radial"==this.type?this.attr({fx:new j.Number(a),fy:new j.Number(b)}):this.attr({x1:new j.Number(a),y1:new j.Number(b)})},to:function(a,b){return"radial"==this.type?this.attr({cx:new j.Number(a),cy:new j.Number(b)}):this.attr({x2:new j.Number(a),y2:new j.Number(b)})},radius:function(a){return"radial"==this.type?this.attr({r:new j.Number(a)}):this},at:function(a,b,c){return this.put(new j.Stop).update(a,b,c)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()}},construct:{gradient:function(a,b){return this.defs().gradient(a,b)}}}),j.extend(j.Defs,{gradient:function(a,b){return this.put(new j.Gradient(a)).update(b)}}),j.Stop=j.invent({create:"stop",inherit:j.Element,extend:{update:function(a){return("number"==typeof a||a instanceof j.Number)&&(a={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new j.Number(a.offset)),this}}}),j.Pattern=j.invent({create:"pattern",inherit:j.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return this.fill()}},construct:{pattern:function(a,b,c){return this.defs().pattern(a,b,c)}}}),j.extend(j.Defs,{pattern:function(a,b,c){return this.put(new j.Pattern).update(c).attr({x:0,y:0,width:a,height:b,patternUnits:"userSpaceOnUse"})}}),j.Doc=j.invent({create:function(a){this.parent="string"==typeof a?document.getElementById(a):a,this.constructor.call(this,"svg"==this.parent.nodeName?this.parent:j.create("svg")),this.attr({xmlns:j.ns,version:"1.1",width:"100%",height:"100%"}).attr("xmlns:xlink",j.xlink,j.xmlns),this._defs=new j.Defs,this._defs.parent=this,this.node.appendChild(this._defs.node),this.doSpof=!1,this.parent!=this.node&&this.stage()},inherit:j.Container,extend:{stage:function(){var a=this;return this.parent.appendChild(this.node),a.spof(),j.on(window,"resize",function(){a.spof()}),this},defs:function(){return this._defs},spof:function(){if(this.doSpof){var a=this.node.getScreenCTM();a&&this.style("left",-a.e%1+"px").style("top",-a.f%1+"px")}return this},fixSubPixelOffset:function(){return this.doSpof=!0,this},remove:function(){return this.parent&&(this.parent.removeChild(this.node),this.parent=null),this}}}),j.Shape=j.invent({create:function(a){this.constructor.call(this,a)},inherit:j.Element}),j.Symbol=j.invent({create:"symbol",inherit:j.Container,construct:{symbol:function(){return this.defs().put(new j.Symbol)}}}),j.Use=j.invent({create:"use",inherit:j.Shape,extend:{element:function(a,b){return this.target=a,this.attr("href",(b||"")+"#"+a,j.xlink)}},construct:{use:function(a,b){return this.put(new j.Use).element(a,b)}}}),j.Rect=j.invent({create:"rect",inherit:j.Shape,construct:{rect:function(a,b){return this.put((new j.Rect).size(a,b))}}}),j.Ellipse=j.invent({create:"ellipse",inherit:j.Shape,extend:{x:function(a){return null==a?this.cx()-this.attr("rx"):this.cx(a+this.attr("rx"))},y:function(a){return null==a?this.cy()-this.attr("ry"):this.cy(a+this.attr("ry"))},cx:function(a){return null==a?this.attr("cx"):this.attr("cx",new j.Number(a).divide(this.trans.scaleX))},cy:function(a){return null==a?this.attr("cy"):this.attr("cy",new j.Number(a).divide(this.trans.scaleY))},width:function(a){return null==a?2*this.attr("rx"):this.attr("rx",new j.Number(a).divide(2))},height:function(a){return null==a?2*this.attr("ry"):this.attr("ry",new j.Number(a).divide(2))},size:function(a,b){var c=d(this.bbox(),a,b);return this.attr({rx:new j.Number(c.width).divide(2),ry:new j.Number(c.height).divide(2)})}},construct:{circle:function(a){return this.ellipse(a,a)},ellipse:function(a,b){return this.put(new j.Ellipse).size(a,b).move(0,0)}}}),j.Line=j.invent({create:"line",inherit:j.Shape,extend:{x:function(a){var b=this.bbox();return null==a?b.x:this.attr({x1:this.attr("x1")-b.x+a,x2:this.attr("x2")-b.x+a})},y:function(a){var b=this.bbox();return null==a?b.y:this.attr({y1:this.attr("y1")-b.y+a,y2:this.attr("y2")-b.y+a})},cx:function(a){var b=this.bbox().width/2;return null==a?this.x()+b:this.x(a-b)},cy:function(a){var b=this.bbox().height/2;return null==a?this.y()+b:this.y(a-b)},width:function(a){var b=this.bbox();return null==a?b.width:this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",b.x+a)},height:function(a){var b=this.bbox();return null==a?b.height:this.attr(this.attr("y1")<this.attr("y2")?"y2":"y1",b.y+a)},size:function(a,b){var c=d(this.bbox(),a,b);return this.width(c.width).height(c.height)},plot:function(a,b,c,d){return this.attr({x1:a,y1:b,x2:c,y2:d})}},construct:{line:function(a,b,c,d){return this.put((new j.Line).plot(a,b,c,d))}}}),j.Polyline=j.invent({create:"polyline",inherit:j.Shape,construct:{polyline:function(a){return this.put(new j.Polyline).plot(a)}}}),j.Polygon=j.invent({create:"polygon",inherit:j.Shape,construct:{polygon:function(a){return this.put(new j.Polygon).plot(a)}}}),j.extend(j.Polyline,j.Polygon,{morphArray:j.PointArray,plot:function(a){return this.attr("points",this.array=new j.PointArray(a,[[0,0]]))},move:function(a,b){return this.attr("points",this.array.move(a,b))},x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},width:function(a){var b=this.bbox();return null==a?b.width:this.size(a,b.height)},height:function(a){var b=this.bbox();return null==a?b.height:this.size(b.width,a)},size:function(a,b){var c=d(this.bbox(),a,b);return this.attr("points",this.array.size(c.width,c.height))}}),j.Path=j.invent({create:"path",inherit:j.Shape,extend:{plot:function(a){return this.attr("d",this.array=new j.PathArray(a,[["M",0,0]]))},move:function(a,b){return this.attr("d",this.array.move(a,b))},x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},size:function(a,b){var c=d(this.bbox(),a,b);return this.attr("d",this.array.size(c.width,c.height))},width:function(a){return null==a?this.bbox().width:this.size(a,this.bbox().height)},height:function(a){return null==a?this.bbox().height:this.size(this.bbox().width,a)}},construct:{path:function(a){return this.put(new j.Path).plot(a)}}}),j.Image=j.invent({create:"image",inherit:j.Shape,extend:{load:function(a){if(!a)return this;var b=this,c=document.createElement("img");return c.onload=function(){var d=b.doc(j.Pattern);0==b.width()&&0==b.height()&&b.size(c.width,c.height),d&&0==d.width()&&0==d.height()&&d.size(b.width(),b.height()),"function"==typeof b._loaded&&b._loaded.call(b,{width:c.width,height:c.height,ratio:c.width/c.height,url:a})},this.attr("href",c.src=this.src=a,j.xlink)},loaded:function(a){return this._loaded=a,this}},construct:{image:function(a,b,c){return this.put(new j.Image).load(a).size(b||0,c||b||0)}}}),j.Text=j.invent({create:function(){this.constructor.call(this,j.create("text")),this._leading=new j.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",j.defaults.attrs["font-family"])},inherit:j.Shape,extend:{x:function(a){return null==a?this.attr("x"):(this.textPath||this.lines.each(function(){this.newLined&&this.x(a)}),this.attr("x",a))},y:function(a){var b=this.attr("y"),c="number"==typeof b?b-this.bbox().y:0;return null==a?"number"==typeof b?b-c:b:this.attr("y","number"==typeof a?a+c:a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)},text:function(a){if("undefined"==typeof a)return this.content;if(this.clear().build(!0),"function"==typeof a)a.call(this,this);else{a=(this.content=a).split("\n");for(var b=0,c=a.length;c>b;b++)this.tspan(a[b]).newLine()}return this.build(!1).rebuild()},size:function(a){return this.attr("font-size",a).rebuild()},leading:function(a){return null==a?this._leading:(this._leading=new j.Number(a),this.rebuild())},rebuild:function(a){if("boolean"==typeof a&&(this._rebuild=a),this._rebuild){var b=this;this.lines.each(function(){this.newLined&&(this.textPath||this.attr("x",b.attr("x")),this.attr("dy",b._leading*new j.Number(b.attr("font-size"))))}),this.fire("rebuild")}return this},build:function(a){return this._build=!!a,this}},construct:{text:function(a){return this.put(new j.Text).text(a)},plain:function(a){return this.put(new j.Text).plain(a)}}}),j.TSpan=j.invent({create:"tspan",inherit:j.Shape,extend:{text:function(a){return"function"==typeof a?a.call(this,this):this.plain(a),this},dx:function(a){return this.attr("dx",a)},dy:function(a){return this.attr("dy",a)},newLine:function(){var a=this.doc(j.Text);return this.newLined=!0,this.dy(a._leading*a.attr("font-size")).attr("x",a.x())}}}),j.extend(j.Text,j.TSpan,{plain:function(a){return this._build===!1&&this.clear(),this.node.appendChild(document.createTextNode(this.content=a)),this},tspan:function p(a){var b=(this.textPath||this).node,p=new j.TSpan;return this._build===!1&&this.clear(),b.appendChild(p.node),p.parent=this,this instanceof j.Text&&this.lines.add(p),p.text(a)},clear:function(){for(var a=(this.textPath||this).node;a.hasChildNodes();)a.removeChild(a.lastChild);return this instanceof j.Text&&(delete this.lines,this.lines=new j.Set,this.content=""),this},length:function(){return this.node.getComputedTextLength()}}),j.TextPath=j.invent({create:"textPath",inherit:j.Element,parent:j.Text,construct:{path:function(a){for(this.textPath=new j.TextPath;this.node.hasChildNodes();)this.textPath.node.appendChild(this.node.firstChild);return this.node.appendChild(this.textPath.node),this.track=this.doc().defs().path(a),this.textPath.parent=this,this.textPath.attr("href","#"+this.track,j.xlink),this},plot:function(a){return this.track&&this.track.plot(a),this}}}),j.Nested=j.invent({create:function(){this.constructor.call(this,j.create("svg")),this.style("overflow","visible")},inherit:j.Container,construct:{nested:function(){return this.put(new j.Nested)}}}),j.A=j.invent({create:"a",inherit:j.Container,extend:{to:function(a){return this.attr("href",a,j.xlink)},show:function(a){return this.attr("show",a,j.xlink)},target:function(a){return this.attr("target",a)}},construct:{link:function(a){return this.put(new j.A).to(a)}}}),j.extend(j.Element,{linkTo:function(a){var b=new j.A;return"function"==typeof a?a.call(b,b):b.to(a),this.parent.put(b).put(this)}}),j.Marker=j.invent({create:"marker",inherit:j.Container,extend:{width:function(a){return this.attr("markerWidth",a)},height:function(a){return this.attr("markerHeight",a)},ref:function(a,b){return this.attr("refX",a).attr("refY",b)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(a,b,c){return this.defs().marker(a,b,c)}}}),j.extend(j.Defs,{marker:function(a,b,c){return this.put(new j.Marker).size(a,b).ref(a/2,b/2).viewbox(0,0,a,b).attr("orient","auto").update(c)}}),j.extend(j.Line,j.Polyline,j.Polygon,j.Path,{marker:function(a,b,c,d){var e=["marker"];return"all"!=a&&e.push(a),e=e.join("-"),a=arguments[1]instanceof j.Marker?arguments[1]:this.doc().marker(b,c,d),this.attr(e,a)}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(a,b){return"color"==b?a:a+"-"+b}};return["fill","stroke"].forEach(function(a){var b,c={};c[a]=function(c){if("string"==typeof c||j.Color.isRgb(c)||c&&"function"==typeof c.fill)this.attr(a,c);else for(b=l[a].length-1;b>=0;b--)null!=c[l[a][b]]&&this.attr(l.prefix(a,l[a][b]),c[l[a][b]]);return this},j.extend(j.Element,j.FX,c)}),j.extend(j.Element,j.FX,{rotate:function(a,b,c){return this.transform({rotation:a||0,cx:b,cy:c})},skew:function(a,b){return this.transform({skewX:a||0,skewY:b||0})},scale:function(a,b){return this.transform({scaleX:a,scaleY:null==b?a:b})},translate:function(a,b){return this.transform({x:a,y:b})},matrix:function(a){return this.transform({matrix:a})},opacity:function(a){return this.attr("opacity",a)}}),j.extend(j.Rect,j.Ellipse,j.FX,{radius:function(a,b){return this.attr({rx:a,ry:b||a})}}),j.extend(j.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(a){return this.node.getPointAtLength(a)}}),j.extend(j.Parent,j.Text,j.FX,{font:function(a){for(var b in a)"leading"==b?this.leading(a[b]):"anchor"==b?this.attr("text-anchor",a[b]):"size"==b||"family"==b||"weight"==b||"stretch"==b||"variant"==b||"style"==b?this.attr("font-"+b,a[b]):this.attr(b,a[b]);return this}}),j.Set=j.invent({create:function(){this.clear()},extend:{add:function(){var a,b,c=[].slice.call(arguments);for(a=0,b=c.length;b>a;a++)this.members.push(c[a]);return this},remove:function(a){var b=this.index(a);return b>-1&&this.members.splice(b,1),this},each:function(a){for(var b=0,c=this.members.length;c>b;b++)a.apply(this.members[b],[b,this.members]);return this},clear:function(){return this.members=[],this},has:function(a){return this.index(a)>=0},index:function(a){return this.members.indexOf(a)},get:function(a){return this.members[a]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){var a=new j.BBox;if(0==this.members.length)return a;var b=this.members[0].rbox();return a.x=b.x,a.y=b.y,a.width=b.width,a.height=b.height,this.each(function(){a=a.merge(this.rbox())}),a}},construct:{set:function(){return new j.Set}}}),j.SetFX=j.invent({create:function(a){this.set=a}}),j.Set.inherit=function(){var a,b=[];for(var a in j.Shape.prototype)"function"==typeof j.Shape.prototype[a]&&"function"!=typeof j.Set.prototype[a]&&b.push(a);b.forEach(function(a){j.Set.prototype[a]=function(){for(var b=0,c=this.members.length;c>b;b++)this.members[b]&&"function"==typeof this.members[b][a]&&this.members[b][a].apply(this.members[b],arguments);return"animate"==a?this.fx||(this.fx=new j.SetFX(this)):this}}),b=[];for(var a in j.FX.prototype)"function"==typeof j.FX.prototype[a]&&"function"!=typeof j.SetFX.prototype[a]&&b.push(a);b.forEach(function(a){j.SetFX.prototype[a]=function(){for(var b=0,c=this.set.members.length;c>b;b++)this.set.members[b].fx[a].apply(this.set.members[b].fx,arguments);return this}})},j.extend(j.Element,{data:function(a,b,c){if("object"==typeof a)for(b in a)this.data(b,a[b]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch(d){return this.attr("data-"+a)}else this.attr("data-"+a,null===b?null:c===!0||"string"==typeof b||"number"==typeof b?b:JSON.stringify(b));return this}}),j.extend(j.Element,{remember:function(a,b){if("object"==typeof arguments[0])for(var b in a)this.remember(b,a[b]);else{if(1==arguments.length)return this.memory()[a];this.memory()[a]=b}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var a=arguments.length-1;a>=0;a--)delete this.memory()[arguments[a]];return this},memory:function(){return this._memory||(this._memory={})}}),j})},function(a,b,c){(function(a,d){"use strict";function e(a,c){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(c)?d.showHidden=c:c&&b._extend(d,c),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,c,d){if(a.customInspect&&c&&A(c.inspect)&&c.inspect!==b.inspect&&(!c.constructor||c.constructor.prototype!==c)){var e=c.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,c);if(f)return f;var g=Object.keys(c),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(c)),z(c)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(c);if(0===g.length){if(A(c)){var q=c.name?": "+c.name:"";return a.stylize("[Function"+q+"]","special")}if(w(c))return a.stylize(RegExp.prototype.toString.call(c),"regexp");if(y(c))return a.stylize(Date.prototype.toString.call(c),"date");if(z(c))return k(c)}var r="",s=!1,u=["{","}"];if(o(c)&&(s=!0,u=["[","]"]),A(c)){var v=c.name?": "+c.name:"";r=" [Function"+v+"]"}if(w(c)&&(r=" "+RegExp.prototype.toString.call(c)),y(c)&&(r=" "+Date.prototype.toUTCString.call(c)),
z(c)&&(r=" "+k(c)),0===g.length&&(!s||0==c.length))return u[0]+r+u[1];if(0>d)return w(c)?a.stylize(RegExp.prototype.toString.call(c),"regexp"):a.stylize("[Object]","special");a.seen.push(c);var x;return x=s?l(a,c,d,p,g):g.map(function(b){return m(a,c,d,p,b,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;b.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},b.deprecate=function(c,e){function f(){if(!g){if(d.throwDeprecation)throw new Error(e);d.traceDeprecation?console.trace(e):console.error(e),g=!0}return c.apply(this,arguments)}if(v(a.process))return function(){return b.deprecate(c,e).apply(this,arguments)};if(d.noDeprecation===!0)return c;var g=!1;return f};var H,I={};b.debuglog=function(a){if(v(H)&&(H=d.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var c=d.pid;I[a]=function(){var d=b.format.apply(b,arguments);console.error("%s %d: %s",a,c,d)}}else I[a]=function(){};return I[a]},b.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},b.isArray=o,b.isBoolean=p,b.isNull=q,b.isNullOrUndefined=r,b.isNumber=s,b.isString=t,b.isSymbol=u,b.isUndefined=v,b.isRegExp=w,b.isObject=x,b.isDate=y,b.isError=z,b.isFunction=A,b.isPrimitive=B,b.isBuffer=c(12);var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];b.log=function(){console.log("%s - %s",E(),b.format.apply(b,arguments))},b.inherits=c(13),b._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(b,function(){return this}(),c(11))},function(a,b){"use strict";function c(){j=!1,g.length?i=g.concat(i):k=-1,i.length&&d()}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=a.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(a){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(a){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(a,b){"use strict";a.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},function(a,b){"use strict";"function"==typeof Object.create?a.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:a.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}}]);