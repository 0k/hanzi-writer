module.exports=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){(function(b){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=d(g),i=c(11),j=d(i),k=c(12),l=d(k),m=c(13),n=d(m),o=c(17),p=d(o),q=c(18),r=d(q),s=c(6),t=c(22),u=d(t),v=c(23),w=d(v),x=c(25),y=d(x),z={charDataLoader:u["default"],showOutline:!0,showCharacter:!0,width:null,height:null,padding:20,strokeAnimationDuration:300,strokeHighlightDuration:200,delayBetweenStrokes:1e3,strokeColor:"#555",highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",showHintAfterMisses:3,highlightOnComplete:!0,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2},A=function(){function a(b,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];e(this,a),this._animator=new w["default"],this._svg=(0,y["default"])(b),this.setOptions(d),this.setCharacter(c),this._setupListeners(),this._quiz=null}return f(a,[{key:"setOptions",value:function(a){this._options=(0,s.copyAndExtend)(z,a),this._mainCharOptions={strokeColor:this._options.strokeColor,strokeWidth:this._options.strokeWidth,strokeAnimationDuration:this._options.strokeAnimationDuration,delayBetweenStrokes:this._options.delayBetweenStrokes},this._outlineCharOptions=(0,s.copyAndExtend)(this._mainCharOptions,{strokeColor:this._options.outlineColor,strokeWidth:this._options.outlineWidth}),this._highlightCharOptions=(0,s.copyAndExtend)(this._mainCharOptions,{strokeColor:this._options.highlightColor,strokeAnimationDuration:this._options.strokeHighlightDuration}),this._userStrokeOptions={strokeColor:this._options.drawingColor,strokeWidth:this._options.drawingWidth,fadeDuration:this._options.drawingFadeDuration}}},{key:"showCharacter",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._animateWithData(function(b){return a._characterRenderer.show(b)},b)}},{key:"hideCharacter",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._animateWithData(function(b){return a._characterRenderer.hide(b)},b)}},{key:"animateCharacter",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.cancelQuiz(),this._animateWithData(function(b){return a._characterRenderer.animate(b)},b)}},{key:"showOutline",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._animateWithData(function(b){return a._outlineRenderer.show(b)},b)}},{key:"hideOutline",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._animateWithData(function(b){return a._outlineRenderer.hide(b)},b)}},{key:"quiz",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._withData(function(){a.cancelQuiz(),a._quiz=new r["default"]({canvas:a._canvas,animator:a._animator,character:a._character,characterRenderer:a._characterRenderer,highlightRenderer:a._highlightRenderer,quizOptions:(0,s.copyAndExtend)(a._options,b),userStrokeOptions:a._userStrokeOptions})})}},{key:"cancelQuiz",value:function(){this._quiz&&this._quiz.cancel(),this._quiz=null}},{key:"setCharacter",value:function(a){var b=this;this.cancelQuiz(),this._positionerRenderer&&this._positionerRenderer.destroy(),this._characterRenderer&&this._characterRenderer.destroy(),this._outlineRenderer&&this._outlineRenderer.destroy(),this._highlightRenderer&&this._highlightRenderer.destroy(),this._withDataPromise=this._loadCharacterData(a).then(function(c){var d=new n["default"];b._character=d.generateCharacter(a,c),b._positioner=new p["default"](b._character,b._options),b._positionerRenderer=new j["default"](b._positioner).setCanvas(b._svg),b._canvas=b._positionerRenderer.getPositionedCanvas(),b._outlineRenderer=new h["default"](b._character,b._outlineCharOptions).setCanvas(b._canvas).draw(),b._characterRenderer=new h["default"](b._character,b._mainCharOptions).setCanvas(b._canvas).draw(),b._highlightRenderer=new h["default"](b._character,b._highlightCharOptions).setCanvas(b._canvas).draw(),b._options.showCharacter&&b._characterRenderer.showImmediate(),b._options.showOutline&&b._outlineRenderer.showImmediate()})}},{key:"_loadCharacterData",value:function(a){var b=this;return this.isLoadingCharData&&this.cancelLoadingCharData(),this.isLoadingCharData=!0,new Promise(function(c,d){b.cancelLoadingCharData=d;var e=b._options.charDataLoader(a,c);e&&c(e)}).then(function(a){return b.isLoadingCharData=!1,a})}},{key:"_withData",value:function(a){return this._withDataPromise=this._withDataPromise.then(a),this._withDataPromise}},{key:"_setupListeners",value:function(){var a=this;this._svg.node.addEventListener("mousedown",function(b){b.preventDefault(),a.isLoadingCharData||a._forwardToQuiz("startUserStroke",a._getMousePoint(b))}),this._svg.node.addEventListener("touchstart",function(b){b.preventDefault(),a.isLoadingCharData||a._forwardToQuiz("startUserStroke",a._getTouchPoint(b))}),this._svg.node.addEventListener("mousemove",function(b){b.preventDefault(),a.isLoadingCharData||a._forwardToQuiz("continueUserStroke",a._getMousePoint(b))}),this._svg.node.addEventListener("touchmove",function(b){b.preventDefault(),a.isLoadingCharData||a._forwardToQuiz("continueUserStroke",a._getTouchPoint(b))}),b.document.addEventListener("mouseup",function(){return a._forwardToQuiz("endUserStroke")}),b.document.addEventListener("touchend",function(){return a._forwardToQuiz("endUserStroke")})}},{key:"_forwardToQuiz",value:function(a){var b;if(this._quiz){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];(b=this._quiz)[a].apply(b,d)}}},{key:"_getMousePoint",value:function(a){return this._positioner.convertExternalPoint(new l["default"](a.offsetX,a.offsetY))}},{key:"_getTouchPoint",value:function(a){var b=a.touches[0].pageX-this._svg.node.offsetLeft,c=a.touches[0].pageY-this._svg.node.offsetTop;return this._positioner.convertExternalPoint(new l["default"](b,c))}},{key:"_animate",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this._animator.animate(a,b)}},{key:"_animateWithData",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this._withData(function(){return b._animate(a,c)})}}]),a}();"undefined"!=typeof window&&!function(){var a=window.HanziWriter;A.noConflict=function(){return window.HanziWriter=a,A},window.HanziWriter=A}(),a.exports=A}).call(b,function(){return this}())},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function p(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:p(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)};Object.defineProperty(b,"__esModule",{value:!0});var j=c(2),k=d(j),l=c(3),m=d(l),n=c(6),o=function(a){function b(a){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,b);var d=f(this,Object.getPrototypeOf(b).call(this));return d.options=c,d.character=a,d.strokeRenderers=d.character.getStrokes().map(function(a){return d.registerChild(new m["default"](a,c))}),d}return g(b,a),h(b,[{key:"getBounds",value:function(){return this.character.getBounds()}},{key:"show",value:function(a){var b=this.strokeRenderers.map(function(b){return b.show(a)});return Promise.all(b)}},{key:"showImmediate",value:function(){this.strokeRenderers.map(function(a){return a.showImmediate()})}},{key:"hide",value:function(a){var b=this.strokeRenderers.map(function(b){return b.hide(a)});return Promise.all(b)}},{key:"hideImmediate",value:function(){this.strokeRenderers.map(function(a){return a.hideImmediate()})}},{key:"flash",value:function(a){var b=this;return this.show(a).then(function(){return b.hide(a)})}},{key:"showStroke",value:function(a,b){return this.getStrokeRenderer(a).show(b)}},{key:"draw",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this.strokeRenderers[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.draw()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}return this}},{key:"getStrokeRenderer",value:function(a){return this.strokeRenderers[a]}},{key:"animate",value:function(a){var b=this;if(!a.isActive())return null;var c=this.hide(a);return this.strokeRenderers.forEach(function(d,e){e>0&&(c=c.then(function(){return(0,n.timeout)(b.options.delayBetweenStrokes)})),c=c.then(function(){return d.animate(a)})}),c}},{key:"setCanvas",value:function(a){i(Object.getPrototypeOf(b.prototype),"setCanvas",this).call(this,a);var c=!0,d=!1,e=void 0;try{for(var f,g=this.strokeRenderers[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.setCanvas(a)}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return this}}]),b}(k["default"]);b["default"]=o},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(){c(this,a),this.isDestroyed=!1,this.childRenderers=[],this.parentRenderer=null}return d(a,[{key:"draw",value:function(){return this}},{key:"registerChild",value:function(a){return this.childRenderers.push(a),a.setParent(this),a}},{key:"setParent",value:function(a){return this.parentRenderer=a,this}},{key:"setCanvas",value:function(a){return this.canvas=a,this}},{key:"destroy",value:function(){this.isDestroyed=!0;var a=!0,b=!1,c=void 0;try{for(var d,e=this.childRenderers[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.destroy()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}}}]),a}();b["default"]=e},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function o(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:o(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)};Object.defineProperty(b,"__esModule",{value:!0});var j=c(2),k=d(j),l=c(4),m=d(l),n=function(a){function b(a){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,b);var d=f(this,Object.getPrototypeOf(b).call(this));return d.stroke=a,d.strokePartRenderers=d.stroke.getStrokeParts().map(function(b){return d.registerChild(new m["default"](b,a,c))}),d.options=c,d}return g(b,a),h(b,[{key:"show",value:function(a){var b=this.strokePartRenderers.map(function(b){return b.show(a)});return Promise.all(b)}},{key:"showImmediate",value:function(){this.strokePartRenderers.map(function(a){return a.showImmediate()})}},{key:"hide",value:function(a){var b=this.strokePartRenderers.map(function(b){return b.hide(a)});return Promise.all(b)}},{key:"hideImmediate",value:function(){this.strokePartRenderers.map(function(a){return a.hideImmediate()})}},{key:"draw",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this.strokePartRenderers[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.draw(this.canvas)}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}return this}},{key:"animate",value:function(a){if(!a.isActive())return null;var b=Promise.resolve();return this.strokePartRenderers.forEach(function(c){b=b.then(function(){return c.animate(a)})}),b}},{key:"highlight",value:function(a){var b=this;return this.animate(a).then(function(){return b.hide(a)})}},{key:"setCanvas",value:function(a){i(Object.getPrototypeOf(b.prototype),"setCanvas",this).call(this,a);var c=!0,d=!1,e=void 0;try{for(var f,g=this.strokePartRenderers[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.setCanvas(a)}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}}]),b}(k["default"]);b["default"]=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:m(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},j=c(5),k=d(j),l=function(a){function b(a,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];e(this,b);var g=f(this,Object.getPrototypeOf(b).call(this));return g.options=d,g.strokePart=a,g.stroke=c,g}return g(b,a),h(b,[{key:"getPathString",value:function(){return i(Object.getPrototypeOf(b.prototype),"getPathString",this).call(this)+" z"}},{key:"getPoints",value:function(){return this.strokePart.getPoints()}},{key:"markAnimationPoints",value:function(){var a=this.strokePart.getStartingPoint(),b=this.strokePart.getEndingPoint();this.canvas.circle(10).attr({fill:"#9F9"}).move(a.getX(),a.getY()),this.canvas.circle(10).attr({fill:"#9F9"}).move(b.getX(),b.getY())}},{key:"draw",value:function(){return i(Object.getPrototypeOf(b.prototype),"draw",this).call(this),this.path.attr(this.getStrokeAttrs()).attr({opacity:0}),this}},{key:"show",value:function(a){var b=this;return new Promise(function(c,d){var e=b.path.animate(b.options.strokeAnimationDuration).opacity(1).after(c);a.registerSvgAnimation(e)})}},{key:"hide",value:function(a){var b=this;return new Promise(function(c,d){var e=b.path.animate(b.options.strokeAnimationDuration).opacity(0).after(c);a.registerSvgAnimation(e)})}},{key:"hideImmediate",value:function(){this.path.opacity(0)}},{key:"showImmediate",value:function(){this.path.opacity(1)}},{key:"animate",value:function(a){var b=this,c=this.strokePart.getStartingPoint();return this.path||this.drawPath(),this.mask||(this.mask=this.canvas.circle(0).center(c.getX(),c.getY()),this.path.clipWith(this.mask)),this.mask.radius(0),this.path.attr({opacity:1}).attr(this.getStrokeAttrs()),new Promise(function(c,d){var e=b.mask.animate(b.options.strokeAnimationDuration/b.stroke.getNumStrokeParts()).radius(b.strokePart.getLength()).after(c);a.registerSvgAnimation(e)})}},{key:"destroy",value:function(){i(Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.mask&&this.mask.remove()}},{key:"getStrokeAttrs",value:function(){return{fill:this.options.strokeColor,stroke:this.options.strokeColor,"stroke-width":this.options.strokeWidth}}}]),b}(k["default"]);a.exports=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:m(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)};Object.defineProperty(b,"__esModule",{value:!0});var j=c(2),k=d(j),l=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,[{key:"getPoints",value:function(){}},{key:"getPathString",value:function(){var a=this.getPoints(),b=a[0],c=a.slice(1),d="M "+b.getX()+" "+b.getY(),e=!0,f=!1,g=void 0;try{for(var h,i=c[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;d+=" L "+j.getX()+" "+j.getY()}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return d}},{key:"drawPath",value:function(){return this.path=this.canvas.path(this.getPathString()),this.path}},{key:"draw",value:function(){return this.drawPath(),this}},{key:"destroy",value:function(){i(Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.path&&this.path.remove()}}]),b}(k["default"]);b["default"]=l},function(a,b,c){"use strict";function d(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=n(a);return(0,m._extend)(c,b),c}function e(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(a===h)return!0}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return!1}function f(){}function g(a){return Math.max.apply(null,a)}function h(a){return Math.min.apply(null,a)}function i(a){var b=g(a),c=h(a),d=(b+c)/2;return[b,d,c]}function j(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];a&&a.apply(void 0,c)}function k(a){var b=0,c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;b+=h}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return b/a.length}function l(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return new Promise(function(b,c){setTimeout(b,a)})}Object.defineProperty(b,"__esModule",{value:!0}),b.copyAndExtend=d,b.inArray=e,b.emptyFunc=f,b.arrayMax=g,b.arrayMin=h,b.getExtremes=i,b.callIfExists=j,b.average=k,b.timeout=l;var m=c(7),n=function(a){return(0,m._extend)({},a)}},function(a,b,c){(function(a,d){function e(a,c){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(c)?d.showHidden=c:c&&b._extend(d,c),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,c,d){if(a.customInspect&&c&&A(c.inspect)&&c.inspect!==b.inspect&&(!c.constructor||c.constructor.prototype!==c)){var e=c.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,c);if(f)return f;var g=Object.keys(c),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(c)),z(c)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(c);if(0===g.length){if(A(c)){var q=c.name?": "+c.name:"";return a.stylize("[Function"+q+"]","special")}if(w(c))return a.stylize(RegExp.prototype.toString.call(c),"regexp");if(y(c))return a.stylize(Date.prototype.toString.call(c),"date");if(z(c))return k(c)}var r="",s=!1,u=["{","}"];if(o(c)&&(s=!0,u=["[","]"]),A(c)){var v=c.name?": "+c.name:"";r=" [Function"+v+"]"}if(w(c)&&(r=" "+RegExp.prototype.toString.call(c)),y(c)&&(r=" "+Date.prototype.toUTCString.call(c)),z(c)&&(r=" "+k(c)),0===g.length&&(!s||0==c.length))return u[0]+r+u[1];if(0>d)return w(c)?a.stylize(RegExp.prototype.toString.call(c),"regexp"):a.stylize("[Object]","special");a.seen.push(c);var x;return x=s?l(a,c,d,p,g):g.map(function(b){return m(a,c,d,p,b,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;b.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},b.deprecate=function(c,e){function f(){if(!g){if(d.throwDeprecation)throw new Error(e);d.traceDeprecation?console.trace(e):console.error(e),g=!0}return c.apply(this,arguments)}if(v(a.process))return function(){return b.deprecate(c,e).apply(this,arguments)};if(d.noDeprecation===!0)return c;var g=!1;return f};var H,I={};b.debuglog=function(a){if(v(H)&&(H=d.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var c=d.pid;I[a]=function(){var d=b.format.apply(b,arguments);console.error("%s %d: %s",a,c,d)}}else I[a]=function(){};return I[a]},b.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},b.isArray=o,b.isBoolean=p,b.isNull=q,b.isNullOrUndefined=r,b.isNumber=s,b.isString=t,b.isSymbol=u,b.isUndefined=v,b.isRegExp=w,b.isObject=x,b.isDate=y,b.isError=z,b.isFunction=A,b.isPrimitive=B,b.isBuffer=c(9);var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];b.log=function(){console.log("%s - %s",E(),b.format.apply(b,arguments))},b.inherits=c(10),b._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(b,function(){return this}(),c(8))},function(a,b){function c(){j=!1,g.length?i=g.concat(i):k=-1,i.length&&d()}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=a.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(a){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(a){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(a,b){a.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},function(a,b){"function"==typeof Object.create?a.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:a.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:m(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)};Object.defineProperty(b,"__esModule",{value:!0});var j=c(2),k=d(j),l=function(a){function b(a){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,b);var c=f(this,Object.getPrototypeOf(b).call(this));return c.positioner=a,c.positonedCanvas=null,c}return g(b,a),h(b,[{key:"getPositionedCanvas",value:function(){return this.positonedCanvas}},{key:"setCanvas",value:function(a){return i(Object.getPrototypeOf(b.prototype),"setCanvas",this).call(this,a),this.positonedCanvas=this.canvas.group().move(this.positioner.getXOffset(),this.positioner.getYOffset()).transform({scaleX:this.positioner.getScale(),scaleY:this.positioner.getScale()}),this}},{key:"destroy",value:function(){i(Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.positonedCanvas.remove()}}]),b}(k["default"]);b["default"]=l},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(6),h=function(){function a(b,c){d(this,a),this._x=parseInt(b,10),this._y=parseInt(c,10)}return f(a,[{key:"getX",value:function(){return this._x}},{key:"getY",value:function(){return this._y}},{key:"subtract",value:function(b){return new a(this.getX()-b.getX(),this.getY()-b.getY())}},{key:"getMagnitude",value:function(){return Math.sqrt(Math.pow(this.getX(),2)+Math.pow(this.getY(),2))}},{key:"equals",value:function(a){return a?a.getX()===this.getX()&&a.getY()===this.getY():!1}}]),a}();h.getBounds=function(a){var b=a.map(function(a){return a.getX()}),c=a.map(function(a){return a.getY()}),d=(0,g.arrayMax)(b),e=(0,g.arrayMax)(c),f=(0,g.arrayMin)(b),i=(0,g.arrayMin)(c);return[new h(f,i),new h(d,e)]},h.getOverallBounds=function(a){var b=[],c=!0,d=!1,f=void 0;try{for(var g,i=a[Symbol.iterator]();!(c=(g=i.next()).done);c=!0){var j=g.value,k=j.getBounds(),l=e(k,2),m=l[0],n=l[1];b.push(m),b.push(n);
}}catch(o){d=!0,f=o}finally{try{!c&&i["return"]&&i["return"]()}finally{if(d)throw f}}return h.getBounds(b)},h.getDistance=function(a,b){var c=a.subtract(b);return c.getMagnitude()},h.cosineSimilarity=function(a,b){var c=a.getX()*b.getX()+a.getY()*b.getY();return c/a.getMagnitude()/b.getMagnitude()},b["default"]=h},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var h=c(12),i=d(h),j=c(14),k=d(j),l=c(15),m=d(l),n=c(16),o=d(n),p=function(){function a(){e(this,a)}return g(a,[{key:"generateCharacter",value:function(a,b){var c=this.generateStrokes(b);return new o["default"](a,c)}},{key:"generateStrokes",value:function(a){var b=[],c=[],d=0,e=!0,f=!1,g=void 0;try{for(var h,i=a[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,l=this._extractStrokeData(j),n=l.points,o=l.isComplete,p=l.strokeType,q=new m["default"](p,n);c.push(q),o&&(b.push(new k["default"](c,d)),d+=1,c=[])}}catch(r){f=!0,g=r}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return b}},{key:"_extractStrokeData",value:function(a){var b=this,c=a.split(":"),d=f(c,2),e=d[0],g=d[1],h=g.replace(/;?\s*$/,""),i=h.split(";").map(function(a){return b._parsePoint(a)}),j="P"===e[2],k=parseInt(e[1],10);return{points:i,isComplete:j,strokeType:k}}},{key:"_parsePoint",value:function(a){var b=a.split(","),c=f(b,2),d=c[0],e=c[1];return new i["default"](d,e)}}]),a}();b["default"]=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(12),h=d(g),i=function(){function a(b,c){e(this,a),this._strokeParts=b,this._strokeNum=c}return f(a,[{key:"getStrokeParts",value:function(){return this._strokeParts}},{key:"getNumStrokeParts",value:function(){return this._strokeParts.length}},{key:"getStrokeNum",value:function(){return this._strokeNum}},{key:"getBounds",value:function(){return h["default"].getOverallBounds(this._strokeParts)}},{key:"getLength",value:function(){return this._strokeParts.reduce(function(a,b){return a+b.getLength()},0)}},{key:"getVectors",value:function(){return this._strokeParts.map(function(a){return a.getVector()})}},{key:"getStartingPoint",value:function(){return this._strokeParts[0].getStartingPoint()}},{key:"getEndingPoint",value:function(){return this._strokeParts[this._strokeParts.length-1].getEndingPoint()}},{key:"getDistance",value:function(a){var b=this._strokeParts.map(function(b){return b.getDistance(a)});return Math.min.apply(Math,b)}},{key:"getAverageDistance",value:function(a){var b=0,c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;b+=this.getDistance(h)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return b/a.length}}]),a}();b["default"]=i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(12),h=d(g),i=c(6),j=function(){function a(b,c){e(this,a),this._strokeType=b,this._points=c}return f(a,[{key:"getPoints",value:function(){return this._points}},{key:"getStrokeType",value:function(){return this._strokeType}},{key:"getBounds",value:function(){return h["default"].getBounds(this._points)}},{key:"getVector",value:function(){return this.getEndingPoint().subtract(this.getStartingPoint())}},{key:"getDistance",value:function(a){var b=this.getStartingPoint(),c=this.getEndingPoint(),d=c.getX()-b.getX(),e=c.getY()-b.getY(),f=this.getLength();return Math.abs(e*a.getX()-d*a.getY()-b.getX()*c.getY()+b.getY()*c.getX())/f}},{key:"getLength",value:function(){var a=this.getStartingPoint(),b=this.getEndingPoint();return h["default"].getDistance(a,b)}},{key:"getStartingPoint",value:function(){return this._getExtremePoint(!1)}},{key:"getEndingPoint",value:function(){return this._getExtremePoint(!0)}},{key:"_getExtremePoint",value:function(b){var c=this.getStrokeType(),d=this.getPoints(),e=c,f=b,g=d.map(function(a){return a.getX()}),j=d.map(function(a){return a.getY()}),k=(0,i.getExtremes)(g),l=(0,i.getExtremes)(j);c>a.FORWARD_SLASH_STROKE&&(e=c-a.FORWARD_SLASH_STROKE,f=!b);var m=f?0:2,n=f?2:0,o=1;return e===a.HORIZONTAL_STROKE?new h["default"](k[m],l[o]):e===a.BACK_SLASH_STROKE?new h["default"](k[m],l[m]):e===a.VERTICAL_STROKE?new h["default"](k[o],l[m]):e===a.FORWARD_SLASH_STROKE?new h["default"](k[n],l[m]):void 0}}]),a}();j.HORIZONTAL_STROKE=1,j.BACK_SLASH_STROKE=2,j.VERTICAL_STROKE=3,j.FORWARD_SLASH_STROKE=4,j.REVERSE_HORIZONTAL_STROKE=5,j.REVERSE_BACK_SLASH_STROKE=6,j.REVERSE_VERTICAL_STROKE=7,j.REVERSE_FORWARD_SLASH_STROKE=8,b["default"]=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(12),h=d(g),i=function(){function a(b,c){e(this,a),this._symbol=b,this._strokes=c}return f(a,[{key:"getSymbol",value:function(){return this._symbol}},{key:"getStrokes",value:function(){return this._strokes}},{key:"getStroke",value:function(a){return this._strokes[a]}},{key:"getNumStrokes",value:function(){return this._strokes.length}},{key:"getBounds",value:function(){return h["default"].getOverallBounds(this.getStrokes())}}]),a}();b["default"]=i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(12),h=d(g),i=function(){function a(b,c){e(this,a),this._character=b,this._options=c,this._calculateScaleAndOffset()}return f(a,[{key:"convertExternalPoint",value:function(a){var b=(a.getX()-this._xOffset)/this._scale,c=(a.getY()-this._yOffset)/this._scale;return new h["default"](b,c)}},{key:"getXOffset",value:function(){return this._xOffset}},{key:"getYOffset",value:function(){return this._yOffset}},{key:"getScale",value:function(){return this._scale}},{key:"_calculateScaleAndOffset",value:function(){var a=this._character.getBounds(),b=a[1].getX()-a[0].getX(),c=a[1].getY()-a[0].getY(),d=this._options.width-2*this._options.padding,e=this._options.height-2*this._options.padding,f=d/b,g=e/c;this._scale=Math.min(f,g);var h=this._options.padding+(d-this._scale*b)/2,i=this._options.padding+(e-this._scale*c)/2;this._xOffset=-1*a[0].getX()*this._scale+h,this._yOffset=-1*a[0].getY()*this._scale+i}}]),a}();b["default"]=i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(19),h=d(g),i=c(20),j=d(i),k=c(21),l=d(k),m=c(6),n=function(){function a(b){var c=b.canvas,d=b.animator,f=b.character,g=b.characterRenderer,i=b.highlightRenderer,j=b.quizOptions,k=b.userStrokeOptions;e(this,a),this._canvas=c,this._animator=d,this._character=f,this._characterRenderer=g,this._highlightRenderer=i,this._quizOptions=j,this._userStrokeOptions=k,this._currentStrokeIndex=0,this._numRecentMistakes=0,this._totalMistakes=0,this._drawnStrokes=[],this._isActive=!0,this._strokeMatcher=new h["default"],this._setupCharacter()}return f(a,[{key:"startUserStroke",value:function(a){return this._isActive?this._userStroke?this.endUserStroke():(this._userStroke=new j["default"](a),this._userStrokeRenderer=new l["default"](this._userStroke,this._userStrokeOptions),void this._userStrokeRenderer.setCanvas(this._canvas).draw()):null}},{key:"continueUserStroke",value:function(a){this._userStroke&&(this._userStroke.appendPoint(a),this._userStrokeRenderer.updatePath())}},{key:"endUserStroke",value:function(){var a=this;return this._userStroke?void this._animator.animate(function(b){var c=[],d=a._strokeMatcher.getMatchingStroke(a._userStroke,a._character.getStrokes());return c.push(a._userStrokeRenderer.fadeAndRemove(b)),a._userStroke=null,a._userStrokeRenderer=null,a._isActive?(a._isValidStroke(d)?a._handleSuccess(d,b):(a._handleFaiulure(),a._numRecentMistakes>=a._quizOptions.showHintAfterMisses&&c.push(a._highlightCorrectStroke(b))),Promise.all(c)):Promise.resolve()}):Promise.resolve()}},{key:"cancel",value:function(){this._isActive=!1}},{key:"_handleSuccess",value:function(a,b){var c=this;(0,m.callIfExists)(this._quizOptions.onCorrectStroke,{character:this._character.getSymbol(),strokeNum:this._currentStrokeIndex,mistakesOnStroke:this._numRecentMistakes,totalMistakes:this._totalMistakes,strokesRemaining:this._character.getNumStrokes()-this._currentStrokeIndex-1}),this._currentStrokeIndex+=1,this._numRecentMistakes=0;var d=this._drawMatchingStroke(a,b);return this._currentStrokeIndex===this._character.getNumStrokes()&&((0,m.callIfExists)(this._quizOptions.onComplete,{character:this._character.getSymbol(),totalMistakes:this._totalMistakes}),this._quizOptions.highlightOnComplete&&(d=d.then(function(){return c._highlightRenderer.flash(b)}))),d}},{key:"_handleFaiulure",value:function(){this._numRecentMistakes+=1,this._totalMistakes+=1,(0,m.callIfExists)(this._quizOptions.onCorrectStroke,{character:this._character.getSymbol(),strokeNum:this._currentStrokeIndex,mistakesOnStroke:this._numRecentMistakes,totalMistakes:this._totalMistakes,strokesRemaining:this._character.getNumStrokes()-this._currentStrokeIndex})}},{key:"_highlightCorrectStroke",value:function(a){var b=this._highlightRenderer.getStrokeRenderer(this._currentStrokeIndex);return b.highlight(a)}},{key:"_drawMatchingStroke",value:function(a,b){return this._drawnStrokes.push(a),this._characterRenderer.showStroke(a.getStrokeNum(),b)}},{key:"_isValidStroke",value:function(a){return a?(0,m.inArray)(a,this._drawnStrokes)?!1:a===this._character.getStroke(this._currentStrokeIndex):!1}},{key:"_setupCharacter",value:function(){var a=this;this._animator.animate(function(b){return a._characterRenderer.hide(b)})}}]),a}();b["default"]=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(12),h=d(g),i=c(6),j=50,k=.5,l=0,m=100,n=function(){function a(){e(this,a)}return f(a,[{key:"getMatchingStroke",value:function(a,b){var c=this._stripDuplicates(a.getPoints());if(c.length<2)return null;var d=null,e=0,f=!0,g=!1,h=void 0;try{for(var i,l=b[Symbol.iterator]();!(f=(i=l.next()).done);f=!0){var m=i.value,n=m.getAverageDistance(c);(e>n||!d)&&(d=m,e=n)}}catch(o){g=!0,h=o}finally{try{!f&&l["return"]&&l["return"]()}finally{if(g)throw h}}var p=j>e,q=this._getLength(c)/d.getLength(),r=q>1-k&&1+k>q,s=this._startAndEndMatches(c,d),t=this._directionMatches(c,d);return p&&r&&s&&t?d:null}},{key:"_startAndEndMatches",value:function(a,b){var c=h["default"].getDistance(b.getStartingPoint(),a[0]),d=h["default"].getDistance(b.getEndingPoint(),a[a.length-1]);return m>c&&m>d}},{key:"_directionMatches",value:function(a,b){var c=this._getEdgeVectors(a),d=b.getVectors(),e=[],f=!0,g=!1,j=void 0;try{for(var k,m=function(){var a=k.value,b=d.map(function(b){return h["default"].cosineSimilarity(b,a)}),c=Math.max.apply(Math,b);e.push(c)},n=c[Symbol.iterator]();!(f=(k=n.next()).done);f=!0)m()}catch(o){g=!0,j=o}finally{try{!f&&n["return"]&&n["return"]()}finally{if(g)throw j}}var p=(0,i.average)(e);return p>l}},{key:"_stripDuplicates",value:function(a){if(a.length<2)return a;var b=[a[0]],c=!0,d=!1,e=void 0;try{for(var f,g=a.slice(1)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.equals(b[b.length-1])||b.push(h)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return b}},{key:"_getLength",value:function(a){var b=0,c=a[0],d=!0,e=!1,f=void 0;try{for(var g,i=a[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=g.value;b+=h["default"].getDistance(j,c),c=j}}catch(k){e=!0,f=k}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}return b}},{key:"_getEdgeVectors",value:function(a){var b=[],c=a[0],d=!0,e=!1,f=void 0;try{for(var g,h=a.slice(1)[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;b.push(i.subtract(c))}}catch(j){e=!0,f=j}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return b}}]),a}();b["default"]=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(12),h=d(g),i=function(){function a(b){e(this,a),this._points=[b]}return f(a,[{key:"getPoints",value:function(){return this._points}},{key:"getBounds",value:function(){return h["default"].getBounds(this._points)}},{key:"appendPoint",value:function(a){this._points.push(a)}}]),a}();b["default"]=i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:m(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)};Object.defineProperty(b,"__esModule",{value:!0});var j=c(5),k=d(j),l=function(a){function b(a){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,b);var d=f(this,Object.getPrototypeOf(b).call(this));return d.options=c,d.userStroke=a,d}return g(b,a),h(b,[{key:"getPoints",value:function(){return this.userStroke.getPoints()}},{key:"updatePath",value:function(){this.path.plot(this.getPathString())}},{key:"draw",value:function(){return i(Object.getPrototypeOf(b.prototype),"draw",this).call(this),this.path.attr(this.getStrokeAttrs()),this}},{key:"fadeAndRemove",value:function(a){var b=this;return new Promise(function(c,d){var e=b.path.animate(b.options.fadeDuration).attr({opacity:0}).after(c);a.registerSvgAnimation(e)}).then(function(){return b.destroy()})}},{key:"getStrokeAttrs",value:function(){return{fill:"none",stroke:this.options.strokeColor,"stroke-width":this.options.strokeWidth}}}]),b}(k["default"]);b["default"]=l},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=function(a,b){var c=new XMLHttpRequest;c.overrideMimeType("application/json"),c.open("GET",d(a),!0),c.onreadystatechange=function(){4===c.readyState&&200===c.status&&b(JSON.parse(c.responseText))},c.send(null)};var c=1,d=function(a){return"http://chanind.github.io/hanzi-writer/cdn/"+c+"/data/"+a+".json"}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var g=c(24),h=d(g),i=function(){function a(){e(this,a)}return f(a,[{key:"construct",value:function(){this._lastAnimation=null}},{key:"animate",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=this._setupAnimation(b);a(c).then(function(){return c.finish()})}},{key:"_setupAnimation",value:function(a){return this._lastAnimation&&this._lastAnimation.cancel(),this._lastAnimation=new h["default"](a),this._lastAnimation}}]),a}();b["default"]=i},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,a),this._svgAnimations=[],this._isActive=!0,this._callback=b.onComplete}return e(a,[{key:"cancel",value:function(){if(this.isActive()){this._isActive=!1;var a=!0,b=!1,c=void 0;try{for(var d,e=this._svgAnimations[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.stop(!0)}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}}}},{key:"registerSvgAnimation",value:function(a){this._svgAnimations.push(a)}},{key:"isActive",value:function(){return this._isActive}},{key:"finish",value:function(){this.isActive()&&(this._isActive=!1,(0,f.callIfExists)(this._callback))}}]),a}();b["default"]=g},function(a,b,c){var d,e;!function(f,g){d=g,e="function"==typeof d?d.call(b,c,b,a):d,!(void 0!==e&&(a.exports=e))}(this,function(a,b,c){function d(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function e(a){return a.charAt(0).toUpperCase()+a.slice(1)}function f(a){return 4==a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a}function g(a){var b=a.toString(16);return 1==b.length?"0"+b:b}function h(a,b,c){return null==c?c=a.height/a.width*b:null==b&&(b=a.width/a.height*c),{width:b,height:c}}function i(a,b,c){return{x:b*a.a+c*a.c+0,y:b*a.b+c*a.d+0}}function j(a){return{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}}function k(a){return a instanceof s.Matrix||(a=new s.Matrix(a)),a}function l(a,b){a.cx=null==a.cx?b.bbox().cx:a.cx,a.cy=null==a.cy?b.bbox().cy:a.cy}function m(a){return a=a.replace(s.regex.whitespace,"").replace(s.regex.matrix,"").split(s.regex.matrixElements),j(s.utils.map(a,function(a){return parseFloat(a)}))}function n(a,b){return"number"==typeof a.from?a.from+(a.to-a.from)*b:a instanceof s.Color||a instanceof s.Number||a instanceof s.Matrix?a.at(b):1>b?a.from:a.to}function o(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b][0],null!=a[b][1]&&(d+=a[b][1],null!=a[b][2]&&(d+=" ",d+=a[b][2],null!=a[b][3]&&(d+=" ",d+=a[b][3],d+=" ",d+=a[b][4],null!=a[b][5]&&(d+=" ",d+=a[b][5],d+=" ",d+=a[b][6],null!=a[b][7]&&(d+=" ",d+=a[b][7])))));return d+" "}function p(a){for(var b=a.childNodes.length-1;b>=0;b--)a.childNodes[b]instanceof SVGElement&&p(a.childNodes[b]);return s.adopt(a).id(s.eid(a.nodeName))}function q(a){return null==a.x&&(a.x=0,a.y=0,a.width=0,a.height=0),a.w=a.width,a.h=a.height,a.x2=a.x+a.width,a.y2=a.y+a.height,a.cx=a.x+a.width/2,a.cy=a.y+a.height/2,a}function r(a){var b=a.toString().match(s.regex.reference);return b?b[1]:void 0}var s=this.SVG=function(a){return s.supported?(a=new s.Doc(a),s.parser||s.prepare(a),a):void 0};if(s.ns="http://www.w3.org/2000/svg",s.xmlns="http://www.w3.org/2000/xmlns/",s.xlink="http://www.w3.org/1999/xlink",s.supported=function(){return!!document.createElementNS&&!!document.createElementNS(s.ns,"svg").createSVGRect}(),!s.supported)return!1;s.did=1e3,s.eid=function(a){return"Svgjs"+e(a)+s.did++},s.create=function(a){var b=document.createElementNS(this.ns,a);return b.setAttribute("id",this.eid(a)),b},s.extend=function(){var a,b,c,d;for(a=[].slice.call(arguments),b=a.pop(),d=a.length-1;d>=0;d--)if(a[d])for(c in b)a[d].prototype[c]=b[c];s.Set&&s.Set.inherit&&s.Set.inherit()},s.invent=function(a){var b="function"==typeof a.create?a.create:function(){this.constructor.call(this,s.create(a.create))};return a.inherit&&(b.prototype=new a.inherit),a.extend&&s.extend(b,a.extend),a.construct&&s.extend(a.parent||s.Container,a.construct),b},s.adopt=function(a){if(a.instance)return a.instance;var b;return b="svg"==a.nodeName?a.parentNode instanceof SVGElement?new s.Nested:new s.Doc:"linearGradient"==a.nodeName?new s.Gradient("linear"):"radialGradient"==a.nodeName?new s.Gradient("radial"):s[e(a.nodeName)]?new(s[e(a.nodeName)]):new s.Element(a),b.type=a.nodeName,b.node=a,a.instance=b,b instanceof s.Doc&&b.namespace().defs(),b},s.prepare=function(a){var b=document.getElementsByTagName("body")[0],c=(b?new s.Doc(b):a.nested()).size(2,0),d=s.create("path");c.node.appendChild(d),s.parser={body:b||a.parent(),draw:c.style("opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),poly:c.polyline().node,path:d}},s.regex={unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,matrix:/matrix\(|\)/g,matrixElements:/,*\s+|,/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i},s.utils={map:function(a,b){var c,d=a.length,e=[];for(c=0;d>c;c++)e.push(b(a[c]));return e},radians:function(a){return a%360*Math.PI/180},degrees:function(a){return 180*a/Math.PI%360},filterSVGElements:function(a){return[].filter.call(a,function(a){return a instanceof SVGElement})}},s.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},s.Color=function(a){var b;this.r=0,this.g=0,this.b=0,"string"==typeof a?s.regex.isRgb.test(a)?(b=s.regex.rgb.exec(a.replace(/\s/g,"")),this.r=parseInt(b[1]),this.g=parseInt(b[2]),this.b=parseInt(b[3])):s.regex.isHex.test(a)&&(b=s.regex.hex.exec(f(a)),this.r=parseInt(b[1],16),this.g=parseInt(b[2],16),this.b=parseInt(b[3],16)):"object"==typeof a&&(this.r=a.r,this.g=a.g,this.b=a.b)},s.extend(s.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+g(this.r)+g(this.g)+g(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(a){return this.destination=new s.Color(a),this},at:function(a){return this.destination?(a=0>a?0:a>1?1:a,new s.Color({r:~~(this.r+(this.destination.r-this.r)*a),g:~~(this.g+(this.destination.g-this.g)*a),b:~~(this.b+(this.destination.b-this.b)*a)})):this}}),s.Color.test=function(a){return a+="",s.regex.isHex.test(a)||s.regex.isRgb.test(a)},s.Color.isRgb=function(a){return a&&"number"==typeof a.r&&"number"==typeof a.g&&"number"==typeof a.b},s.Color.isColor=function(a){return s.Color.isRgb(a)||s.Color.test(a)},s.Array=function(a,b){a=(a||[]).valueOf(),0==a.length&&b&&(a=b.valueOf()),this.value=this.parse(a)},s.extend(s.Array,{morph:function(a){if(this.destination=this.parse(a),this.value.length!=this.destination.length){for(var b=this.value[this.value.length-1],c=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(c);for(;this.value.length<this.destination.length;)this.value.push(b)}return this},settle:function(){for(var a=0,b=this.value.length,c=[];b>a;a++)-1==c.indexOf(this.value[a])&&c.push(this.value[a]);return this.value=c},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];c>b;b++)d.push(this.value[b]+(this.destination[b]-this.value[b])*a);return new s.Array(d)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(a){return a=a.valueOf(),Array.isArray(a)?a:this.split(a)},split:function(a){return a.trim().split(/\s+/)},reverse:function(){return this.value.reverse(),this}}),s.PointArray=function(a,b){this.constructor.call(this,a,b||[[0,0]])},s.PointArray.prototype=new s.Array,s.extend(s.PointArray,{toString:function(){for(var a=0,b=this.value.length,c=[];b>a;a++)c.push(this.value[a].join(","));return c.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];c>b;b++)d.push([this.value[b][0]+(this.destination[b][0]-this.value[b][0])*a,this.value[b][1]+(this.destination[b][1]-this.value[b][1])*a]);return new s.PointArray(d)},parse:function(a){if(a=a.valueOf(),Array.isArray(a))return a;a=this.split(a);for(var b,c=0,d=a.length,e=[];d>c;c++)b=a[c].split(","),e.push([parseFloat(b[0]),parseFloat(b[1])]);return e},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d=this.value.length-1;d>=0;d--)this.value[d]=[this.value[d][0]+a,this.value[d][1]+b];return this},size:function(a,b){var c,d=this.bbox();for(c=this.value.length-1;c>=0;c--)this.value[c][0]=(this.value[c][0]-d.x)*a/d.width+d.x,this.value[c][1]=(this.value[c][1]-d.y)*b/d.height+d.y;return this},bbox:function(){return s.parser.poly.setAttribute("points",this.toString()),s.parser.poly.getBBox()}}),s.PathArray=function(a,b){this.constructor.call(this,a,b||[["M",0,0]])},s.PathArray.prototype=new s.Array,s.extend(s.PathArray,{toString:function(){return o(this.value)},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d,e=this.value.length-1;e>=0;e--)d=this.value[e][0],"M"==d||"L"==d||"T"==d?(this.value[e][1]+=a,this.value[e][2]+=b):"H"==d?this.value[e][1]+=a:"V"==d?this.value[e][1]+=b:"C"==d||"S"==d||"Q"==d?(this.value[e][1]+=a,this.value[e][2]+=b,this.value[e][3]+=a,this.value[e][4]+=b,"C"==d&&(this.value[e][5]+=a,this.value[e][6]+=b)):"A"==d&&(this.value[e][6]+=a,this.value[e][7]+=b);return this},size:function(a,b){var c,d,e=this.bbox();for(c=this.value.length-1;c>=0;c--)d=this.value[c][0],"M"==d||"L"==d||"T"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y):"H"==d?this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x:"V"==d?this.value[c][1]=(this.value[c][1]-e.y)*b/e.height+e.y:"C"==d||"S"==d||"Q"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y,this.value[c][3]=(this.value[c][3]-e.x)*a/e.width+e.x,this.value[c][4]=(this.value[c][4]-e.y)*b/e.height+e.y,"C"==d&&(this.value[c][5]=(this.value[c][5]-e.x)*a/e.width+e.x,this.value[c][6]=(this.value[c][6]-e.y)*b/e.height+e.y)):"A"==d&&(this.value[c][1]=this.value[c][1]*a/e.width,this.value[c][2]=this.value[c][2]*b/e.height,this.value[c][6]=(this.value[c][6]-e.x)*a/e.width+e.x,this.value[c][7]=(this.value[c][7]-e.y)*b/e.height+e.y);return this},parse:function(a){if(a instanceof s.PathArray)return a.valueOf();var b,c,d,e,f,g,h,i,j,k,l,m=0,n=0;for(s.parser.path.setAttribute("d","string"==typeof a?a:o(a)),l=s.parser.path.pathSegList,b=0,c=l.numberOfItems;c>b;++b)k=l.getItem(b),j=k.pathSegTypeAsLetter,"M"==j||"L"==j||"H"==j||"V"==j||"C"==j||"S"==j||"Q"==j||"T"==j||"A"==j?("x"in k&&(m=k.x),"y"in k&&(n=k.y)):("x1"in k&&(f=m+k.x1),"x2"in k&&(h=m+k.x2),"y1"in k&&(g=n+k.y1),"y2"in k&&(i=n+k.y2),"x"in k&&(m+=k.x),"y"in k&&(n+=k.y),"m"==j?l.replaceItem(s.parser.path.createSVGPathSegMovetoAbs(m,n),b):"l"==j?l.replaceItem(s.parser.path.createSVGPathSegLinetoAbs(m,n),b):"h"==j?l.replaceItem(s.parser.path.createSVGPathSegLinetoHorizontalAbs(m),b):"v"==j?l.replaceItem(s.parser.path.createSVGPathSegLinetoVerticalAbs(n),b):"c"==j?l.replaceItem(s.parser.path.createSVGPathSegCurvetoCubicAbs(m,n,f,g,h,i),b):"s"==j?l.replaceItem(s.parser.path.createSVGPathSegCurvetoCubicSmoothAbs(m,n,h,i),b):"q"==j?l.replaceItem(s.parser.path.createSVGPathSegCurvetoQuadraticAbs(m,n,f,g),b):"t"==j?l.replaceItem(s.parser.path.createSVGPathSegCurvetoQuadraticSmoothAbs(m,n),b):"a"==j?l.replaceItem(s.parser.path.createSVGPathSegArcAbs(m,n,k.r1,k.r2,k.angle,k.largeArcFlag,k.sweepFlag),b):("z"==j||"Z"==j)&&(m=d,n=e)),("M"==j||"m"==j)&&(d=m,e=n);for(a=[],l=s.parser.path.pathSegList,b=0,c=l.numberOfItems;c>b;++b)k=l.getItem(b),j=k.pathSegTypeAsLetter,m=[j],"M"==j||"L"==j||"T"==j?m.push(k.x,k.y):"H"==j?m.push(k.x):"V"==j?m.push(k.y):"C"==j?m.push(k.x1,k.y1,k.x2,k.y2,k.x,k.y):"S"==j?m.push(k.x2,k.y2,k.x,k.y):"Q"==j?m.push(k.x1,k.y1,k.x,k.y):"A"==j&&m.push(k.r1,k.r2,k.angle,0|k.largeArcFlag,0|k.sweepFlag,k.x,k.y),a.push(m);return a},bbox:function(){return s.parser.path.setAttribute("d",this.toString()),s.parser.path.getBBox()}}),s.Number=s.invent({create:function(a,b){this.value=0,this.unit=b||"","number"==typeof a?this.value=isNaN(a)?0:isFinite(a)?a:0>a?-3.4e38:3.4e38:"string"==typeof a?(b=a.match(s.regex.unit),b&&(this.value=parseFloat(b[1]),"%"==b[2]?this.value/=100:"s"==b[2]&&(this.value*=1e3),this.unit=b[2])):a instanceof s.Number&&(this.value=a.valueOf(),this.unit=a.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},valueOf:function(){return this.value},plus:function(a){
return new s.Number(this+new s.Number(a),this.unit)},minus:function(a){return this.plus(-new s.Number(a))},times:function(a){return new s.Number(this*new s.Number(a),this.unit)},divide:function(a){return new s.Number(this/new s.Number(a),this.unit)},to:function(a){var b=new s.Number(this);return"string"==typeof a&&(b.unit=a),b},morph:function(a){return this.destination=new s.Number(a),this},at:function(a){return this.destination?new s.Number(this.destination).minus(this).times(a).plus(this):this}}}),s.ViewBox=function(a){var b,c,d,e,f=1,g=1,h=a.bbox(),i=(a.attr("viewBox")||"").match(/-?[\d\.]+/g),j=a,k=a;for(d=new s.Number(a.width()),e=new s.Number(a.height());"%"==d.unit;)f*=d.value,d=new s.Number(j instanceof s.Doc?j.parent().offsetWidth:j.parent().width()),j=j.parent();for(;"%"==e.unit;)g*=e.value,e=new s.Number(k instanceof s.Doc?k.parent().offsetHeight:k.parent().height()),k=k.parent();this.x=h.x,this.y=h.y,this.width=d*f,this.height=e*g,this.zoom=1,i&&(b=parseFloat(i[0]),c=parseFloat(i[1]),d=parseFloat(i[2]),e=parseFloat(i[3]),this.zoom=this.width/this.height>d/e?this.height/e:this.width/d,this.x=b,this.y=c,this.width=d,this.height=e)},s.extend(s.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),s.Element=s.invent({create:function(a){this._stroke=s.defaults.attrs.stroke,(this.node=a)&&(this.type=a.nodeName,this.node.instance=this,this._stroke=a.getAttribute("stroke")||this._stroke)},extend:{x:function(a){return this.attr("x",a)},y:function(a){return this.attr("y",a)},cx:function(a){return null==a?this.x()+this.width()/2:this.x(a-this.width()/2)},cy:function(a){return null==a?this.y()+this.height()/2:this.y(a-this.height()/2)},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},width:function(a){return this.attr("width",a)},height:function(a){return this.attr("height",a)},size:function(a,b){var c=h(this.bbox(),a,b);return this.width(new s.Number(c.width)).height(new s.Number(c.height))},clone:function(){var a=p(this.node.cloneNode(!0));return this.after(a),a},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(a){return this.after(a).remove(),a},addTo:function(a){return a.put(this)},putIn:function(a){return a.add(this)},id:function(a){return this.attr("id",a)},inside:function(a,b){var c=this.bbox();return a>c.x&&b>c.y&&a<c.x+c.width&&b<c.y+c.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var a=this.attr("class");return null==a?[]:a.trim().split(/\s+/)},hasClass:function(a){return-1!=this.classes().indexOf(a)},addClass:function(a){if(!this.hasClass(a)){var b=this.classes();b.push(a),this.attr("class",b.join(" "))}return this},removeClass:function(a){return this.hasClass(a)&&this.attr("class",this.classes().filter(function(b){return b!=a}).join(" ")),this},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)},reference:function(a){return s.get(this.attr(a))},parent:function(a){if(this.node.parentNode){var b=s.adopt(this.node.parentNode);if(a)for(;!(b instanceof a)&&b.node.parentNode instanceof SVGElement;)b=s.adopt(b.node.parentNode);return b}},doc:function(a){return this instanceof s.Doc?this:this.parent(s.Doc)},"native":function(){return this.node},svg:function(a){var b=document.createElement("svg");if(!(a&&this instanceof s.Parent))return b.appendChild(a=document.createElement("svg")),a.appendChild(this.node.cloneNode(!0)),b.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");b.innerHTML="<svg>"+a.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var c=0,d=b.firstChild.childNodes.length;d>c;c++)this.node.appendChild(b.firstChild.firstChild);return this}}}),s.FX=s.invent({create:function(a){this.target=a},extend:{animate:function(a,b,c){var d,e,f,g=this.target,h=this;return"object"==typeof a&&(c=a.delay,b=a.ease,a=a.duration),a="="==a?a:null==a?1e3:new s.Number(a).valueOf(),b=b||"<>",h.at=function(a){var c;if(a=0>a?0:a>1?1:a,null==d){d=[];for(f in h.attrs)d.push(f);if(g.morphArray&&(h.destination.plot||d.indexOf("points")>-1)){var i,j=new g.morphArray(h.destination.plot||h.attrs.points||g.array());h.destination.size&&j.size(h.destination.size.width.to,h.destination.size.height.to),i=j.bbox(),h.destination.x?j.move(h.destination.x.to,i.y):h.destination.cx&&j.move(h.destination.cx.to-i.width/2,i.y),i=j.bbox(),h.destination.y?j.move(i.x,h.destination.y.to):h.destination.cy&&j.move(i.x,h.destination.cy.to-i.height/2),h.destination={plot:g.array().morph(j)}}}if(null==e){e=[];for(f in h.styles)e.push(f)}for(a="<>"==b?-Math.cos(a*Math.PI)/2+.5:">"==b?Math.sin(a*Math.PI/2):"<"==b?-Math.cos(a*Math.PI/2)+1:"-"==b?a:"function"==typeof b?b(a):a,h.destination.plot?g.plot(h.destination.plot.at(a)):(h.destination.x?g.x(h.destination.x.at(a)):h.destination.cx&&g.cx(h.destination.cx.at(a)),h.destination.y?g.y(h.destination.y.at(a)):h.destination.cy&&g.cy(h.destination.cy.at(a)),h.destination.size&&g.size(h.destination.size.width.at(a),h.destination.size.height.at(a))),h.destination.viewbox&&g.viewbox(h.destination.viewbox.x.at(a),h.destination.viewbox.y.at(a),h.destination.viewbox.width.at(a),h.destination.viewbox.height.at(a)),h.destination.leading&&g.leading(h.destination.leading.at(a)),c=d.length-1;c>=0;c--)g.attr(d[c],n(h.attrs[d[c]],a));for(c=e.length-1;c>=0;c--)g.style(e[c],n(h.styles[e[c]],a));h.situation.during&&h.situation.during.call(g,a,function(b,c){return n({from:b,to:c},a)})},"number"==typeof a&&(this.timeout=setTimeout(function(){var d=(new Date).getTime();h.situation.start=d,h.situation.play=!0,h.situation.finish=d+a,h.situation.duration=a,h.situation.ease=b,h.render=function(){if(h.situation.play===!0){var d=(new Date).getTime(),e=d>h.situation.finish?1:(d-h.situation.start)/a;h.situation.reversing&&(e=-e+1),h.at(e),d>h.situation.finish?(h.destination.plot&&g.plot(new s.PointArray(h.destination.plot.destination).settle()),h.situation.loop===!0||"number"==typeof h.situation.loop&&h.situation.loop>0?(h.situation.reverse&&(h.situation.reversing=!h.situation.reversing),"number"==typeof h.situation.loop&&((!h.situation.reverse||h.situation.reversing)&&--h.situation.loop,h.situation.reverse||1!=h.situation.loop||--h.situation.loop),h.animate(a,b,c)):h.situation.after?h.situation.after.apply(g,[h]):h.stop()):h.animationFrame=requestAnimationFrame(h.render)}else h.animationFrame=requestAnimationFrame(h.render)},h.render()},new s.Number(c).valueOf())),this},bbox:function(){return this.target.bbox()},attr:function(a,b){if("object"==typeof a)for(var c in a)this.attr(c,a[c]);else{var d=this.target.attr(a);"transform"==a?(this.attrs[a]&&(b=this.attrs[a].destination.multiply(b)),this.attrs[a]=this.target.ctm().morph(b),this.param&&(b=this.target.transform("rotation"),this.attrs[a].param={from:this.target.param||{rotation:b,cx:this.param.cx,cy:this.param.cy},to:this.param})):this.attrs[a]=s.Color.isColor(b)?new s.Color(d).morph(b):s.regex.unit.test(b)?new s.Number(d).morph(b):{from:d,to:b}}return this},style:function(a,b){if("object"==typeof a)for(var c in a)this.style(c,a[c]);else this.styles[a]={from:this.target.style(a),to:b};return this},x:function(a){return this.destination.x=new s.Number(this.target.x()).morph(a),this},y:function(a){return this.destination.y=new s.Number(this.target.y()).morph(a),this},cx:function(a){return this.destination.cx=new s.Number(this.target.cx()).morph(a),this},cy:function(a){return this.destination.cy=new s.Number(this.target.cy()).morph(a),this},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){if(this.target instanceof s.Text)this.attr("font-size",a);else{var c=this.target.bbox();this.destination.size={width:new s.Number(c.width).morph(a),height:new s.Number(c.height).morph(b)}}return this},plot:function(a){return this.destination.plot=a,this},leading:function(a){return this.target.destination.leading&&(this.destination.leading=new s.Number(this.target.destination.leading).morph(a)),this},viewbox:function(a,b,c,d){if(this.target instanceof s.Container){var e=this.target.viewbox();this.destination.viewbox={x:new s.Number(e.x).morph(a),y:new s.Number(e.y).morph(b),width:new s.Number(e.width).morph(c),height:new s.Number(e.height).morph(d)}}return this},update:function(a){return this.target instanceof s.Stop&&(null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new s.Number(a.offset))),this},during:function(a){return this.situation.during=a,this},after:function(a){return this.situation.after=a,this},loop:function(a,b){return this.situation.loop=this.situation.loops=a||!0,this.situation.reverse=!!b,this},stop:function(a){return a===!0?(this.animate(0),this.situation.after&&this.situation.after.apply(this.target,[this])):(clearTimeout(this.timeout),cancelAnimationFrame(this.animationFrame),this.attrs={},this.styles={},this.situation={},this.destination={}),this},pause:function(){return this.situation.play===!0&&(this.situation.play=!1,this.situation.pause=(new Date).getTime()),this},play:function(){if(this.situation.play===!1){var a=(new Date).getTime()-this.situation.pause;this.situation.finish+=a,this.situation.start+=a,this.situation.play=!0}return this}},parent:s.Element,construct:{animate:function(a,b,c){return(this.fx||(this.fx=new s.FX(this))).stop().animate(a,b,c)},stop:function(a){return this.fx&&this.fx.stop(a),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this}}}),s.BBox=s.invent({create:function(a){if(a){var b;try{b=a.node.getBBox()}catch(c){b={x:a.node.clientLeft,y:a.node.clientTop,width:a.node.clientWidth,height:a.node.clientHeight}}this.x=b.x,this.y=b.y,this.width=b.width,this.height=b.height}q(this)},parent:s.Element,construct:{bbox:function(){return new s.BBox(this)}}}),s.TBox=s.invent({create:function(a){if(a){var b=a.ctm().extract(),c=a.bbox();this.width=c.width*b.scaleX,this.height=c.height*b.scaleY,this.x=c.x+b.x,this.y=c.y+b.y}q(this)},parent:s.Element,construct:{tbox:function(){return new s.TBox(this)}}}),s.RBox=s.invent({create:function(a){if(a){var b=a.doc().parent(),c=a.node.getBoundingClientRect(),d=1;for(this.x=c.left,this.y=c.top,this.x-=b.offsetLeft,this.y-=b.offsetTop;b=b.offsetParent;)this.x-=b.offsetLeft,this.y-=b.offsetTop;for(b=a;b.parent&&(b=b.parent());)b.viewbox&&(d*=b.viewbox().zoom,this.x-=b.x()||0,this.y-=b.y()||0);this.width=c.width/=d,this.height=c.height/=d}q(this),this.x+=window.scrollX,this.y+=window.scrollY},parent:s.Element,construct:{rbox:function(){return new s.RBox(this)}}}),[s.BBox,s.TBox,s.RBox].forEach(function(a){s.extend(a,{merge:function(b){var c=new a;return c.x=Math.min(this.x,b.x),c.y=Math.min(this.y,b.y),c.width=Math.max(this.x+this.width,b.x+b.width)-c.x,c.height=Math.max(this.y+this.height,b.y+b.height)-c.y,q(c)}})}),s.Matrix=s.invent({create:function(a){var b,c=j([1,0,0,1,0,0]);for(a=a instanceof s.Element?a.matrixify():"string"==typeof a?m(a):6==arguments.length?j([].slice.call(arguments)):"object"==typeof a?a:c,b=u.length-1;b>=0;b--)this[u[b]]=a&&"number"==typeof a[u[b]]?a[u[b]]:c[u[b]]},extend:{extract:function(){var a=i(this,0,1),b=i(this,1,0),c=180/Math.PI*Math.atan2(a.y,a.x)-90;return{x:this.e,y:this.f,skewX:-c,skewY:180/Math.PI*Math.atan2(b.y,b.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:c}},clone:function(){return new s.Matrix(this)},morph:function(a){return this.destination=new s.Matrix(a),this},at:function(a){if(!this.destination)return this;var b=new s.Matrix({a:this.a+(this.destination.a-this.a)*a,b:this.b+(this.destination.b-this.b)*a,c:this.c+(this.destination.c-this.c)*a,d:this.d+(this.destination.d-this.d)*a,e:this.e+(this.destination.e-this.e)*a,f:this.f+(this.destination.f-this.f)*a});if(this.param&&this.param.to){var c={rotation:this.param.from.rotation+(this.param.to.rotation-this.param.from.rotation)*a,cx:this.param.from.cx,cy:this.param.from.cy};b=b.rotate((this.param.to.rotation-2*this.param.from.rotation)*a,c.cx,c.cy),b.param=c}return b},multiply:function(a){return new s.Matrix(this["native"]().multiply(k(a)["native"]()))},inverse:function(){return new s.Matrix(this["native"]().inverse())},translate:function(a,b){return new s.Matrix(this["native"]().translate(a||0,b||0))},scale:function(a,b,c,d){return(1==arguments.length||3==arguments.length)&&(b=a),3==arguments.length&&(d=c,c=b),this.around(c,d,new s.Matrix(a,0,0,b,0,0))},rotate:function(a,b,c){return a=s.utils.radians(a),this.around(b,c,new s.Matrix(Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),0,0))},flip:function(a,b){return"x"==a?this.scale(-1,1,b,0):this.scale(1,-1,0,b)},skew:function(a,b,c,d){return this.around(c,d,this["native"]().skewX(a||0).skewY(b||0))},skewX:function(a,b,c){return this.around(b,c,this["native"]().skewX(a||0))},skewY:function(a,b,c){return this.around(b,c,this["native"]().skewY(a||0))},around:function(a,b,c){return this.multiply(new s.Matrix(1,0,0,1,a||0,b||0)).multiply(c).multiply(new s.Matrix(1,0,0,1,-a||0,-b||0))},"native":function(){for(var a=s.parser.draw.node.createSVGMatrix(),b=u.length-1;b>=0;b--)a[u[b]]=this[u[b]];return a},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:s.Element,construct:{ctm:function(){return new s.Matrix(this.node.getCTM())}}}),s.extend(s.Element,{attr:function(a,b,c){if(null==a){for(a={},b=this.node.attributes,c=b.length-1;c>=0;c--)a[b[c].nodeName]=s.regex.isNumber.test(b[c].nodeValue)?parseFloat(b[c].nodeValue):b[c].nodeValue;return a}if("object"==typeof a)for(b in a)this.attr(b,a[b]);else if(null===b)this.node.removeAttribute(a);else{if(null==b)return b=this.node.getAttribute(a),null==b?s.defaults.attrs[a]:s.regex.isNumber.test(b)?parseFloat(b):b;"stroke-width"==a?this.attr("stroke",parseFloat(b)>0?this._stroke:null):"stroke"==a&&(this._stroke=b),("fill"==a||"stroke"==a)&&(s.regex.isImage.test(b)&&(b=this.doc().defs().image(b,0,0)),b instanceof s.Image&&(b=this.doc().defs().pattern(0,0,function(){this.add(b)}))),"number"==typeof b?b=new s.Number(b):s.Color.isColor(b)?b=new s.Color(b):Array.isArray(b)?b=new s.Array(b):b instanceof s.Matrix&&b.param&&(this.param=b.param),"leading"==a?this.leading&&this.leading(b):"string"==typeof c?this.node.setAttributeNS(c,a,b.toString()):this.node.setAttribute(a,b.toString()),!this.rebuild||"font-size"!=a&&"x"!=a||this.rebuild(a,b)}return this}}),s.extend(s.Element,s.FX,{transform:function(a,b){var c,d=this.target||this;if("object"!=typeof a)return c=new s.Matrix(d).extract(),"object"==typeof this.param&&(c.rotation=this.param.rotation,c.cx=this.param.cx,c.cy=this.param.cy),"string"==typeof a?c[a]:c;if(c=this instanceof s.FX&&this.attrs.transform?this.attrs.transform:new s.Matrix(d),b=!!b||!!a.relative,null!=a.a)c=b?c.multiply(new s.Matrix(a)):new s.Matrix(a);else if(null!=a.rotation)l(a,d),b&&(a.rotation+=this.param&&null!=this.param.rotation?this.param.rotation:c.extract().rotation),this.param=a,this instanceof s.Element&&(c=b?c.rotate(a.rotation,a.cx,a.cy):c.rotate(a.rotation-c.extract().rotation,a.cx,a.cy));else if(null!=a.scale||null!=a.scaleX||null!=a.scaleY){if(l(a,d),a.scaleX=null!=a.scale?a.scale:null!=a.scaleX?a.scaleX:1,a.scaleY=null!=a.scale?a.scale:null!=a.scaleY?a.scaleY:1,!b){var e=c.extract();a.scaleX=1*a.scaleX/e.scaleX,a.scaleY=1*a.scaleY/e.scaleY}c=c.scale(a.scaleX,a.scaleY,a.cx,a.cy)}else if(null!=a.skewX||null!=a.skewY){if(l(a,d),a.skewX=null!=a.skewX?a.skewX:0,a.skewY=null!=a.skewY?a.skewY:0,!b){var e=c.extract();c=c.multiply((new s.Matrix).skew(e.skewX,e.skewY,a.cx,a.cy).inverse())}c=c.skew(a.skewX,a.skewY,a.cx,a.cy)}else a.flip?c=c.flip(a.flip,null==a.offset?d.bbox()["c"+a.flip]:a.offset):(null!=a.x||null!=a.y)&&(b?c=c.translate(a.x,a.y):(null!=a.x&&(c.e=a.x),null!=a.y&&(c.f=a.y)));return this.attr(this instanceof s.Pattern?"patternTransform":this instanceof s.Gradient?"gradientTransform":"transform",c)}}),s.extend(s.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var a=(this.attr("transform")||"").split(/\)\s*/).slice(0,-1).map(function(a){var b=a.trim().split("(");return[b[0],b[1].split(s.regex.matrixElements).map(function(a){return parseFloat(a)})]}).reduce(function(a,b){return"matrix"==b[0]?a.multiply(j(b[1])):a[b[0]].apply(a,b[1])},new s.Matrix);return this.attr("transform",a),a}}),s.extend(s.Element,{style:function(a,b){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof a)for(b in a)this.style(b,a[b]);else{if(!s.regex.isCss.test(a))return this.node.style[d(a)];a=a.split(";");for(var c=0;c<a.length;c++)b=a[c].split(":"),this.style(b[0].replace(/\s+/g,""),b[1])}else this.node.style[d(a)]=null===b||s.regex.isBlank.test(b)?"":b;return this}}),s.Parent=s.invent({create:function(a){this.constructor.call(this,a)},inherit:s.Element,extend:{children:function(){return s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(a){return s.adopt(a)})},add:function(a,b){return this.has(a)||(b=null==b?this.children().length:b,this.node.insertBefore(a.node,this.node.childNodes[b]||null)),this},put:function(a,b){return this.add(a,b),a},has:function(a){return this.index(a)>=0},index:function(a){return this.children().indexOf(a)},get:function(a){return this.children()[a]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(a,b){var c,d,e=this.children();for(c=0,d=e.length;d>c;c++)e[c]instanceof s.Element&&a.apply(e[c],[c,e]),b&&e[c]instanceof s.Container&&e[c].each(a,b);return this},removeElement:function(a){return this.node.removeChild(a.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),s.Container=s.invent({create:function(a){this.constructor.call(this,a)},inherit:s.Parent,extend:{viewbox:function(a){return 0==arguments.length?new s.ViewBox(this):(a=1==arguments.length?[a.x,a.y,a.width,a.height]:[].slice.call(arguments),this.attr("viewBox",a))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(a){s.Element.prototype[a]=function(b){var c=this;return this.node["on"+a]="function"==typeof b?function(){return b.apply(c,arguments)}:null,this}}),s.listeners=[],s.handlerMap=[],s.on=function(a,b,c,d){var e=c.bind(d||a.instance||a),f=(s.handlerMap.indexOf(a)+1||s.handlerMap.push(a))-1,g=b.split(".")[0],h=b.split(".")[1]||"*";s.listeners[f]=s.listeners[f]||{},s.listeners[f][g]=s.listeners[f][g]||{},s.listeners[f][g][h]=s.listeners[f][g][h]||{},s.listeners[f][g][h][c]=e,a.addEventListener(g,e,!1)},s.off=function(a,b,c){var d=s.handlerMap.indexOf(a),e=b&&b.split(".")[0],f=b&&b.split(".")[1];if(-1!=d)if(c)s.listeners[d][e]&&s.listeners[d][e][f||"*"]&&(a.removeEventListener(e,s.listeners[d][e][f||"*"][c],!1),delete s.listeners[d][e][f||"*"][c]);else if(f&&e){if(s.listeners[d][e]&&s.listeners[d][e][f]){for(c in s.listeners[d][e][f])s.off(a,[e,f].join("."),c);delete s.listeners[d][e][f]}}else if(f)for(b in s.listeners[d])for(namespace in s.listeners[d][b])f===namespace&&s.off(a,[b,f].join("."));else if(e){if(s.listeners[d][e]){for(namespace in s.listeners[d][e])s.off(a,[e,namespace].join("."));delete s.listeners[d][e]}}else{for(b in s.listeners[d])s.off(a,b);delete s.listeners[d]}},s.extend(s.Element,{on:function(a,b,c){return s.on(this.node,a,b,c),this},off:function(a,b){return s.off(this.node,a,b),this},fire:function(a,b){return a instanceof Event?this.node.dispatchEvent(a):this.node.dispatchEvent(new v(a,{detail:b})),this}}),s.Defs=s.invent({create:"defs",inherit:s.Container}),s.G=s.invent({create:"g",inherit:s.Container,extend:{x:function(a){return null==a?this.transform("x"):this.transform({x:-this.x()+a},!0)},y:function(a){return null==a?this.transform("y"):this.transform({y:-this.y()+a},!0)},cx:function(a){return null==a?this.tbox().cx:this.x(a-this.tbox().width/2)},cy:function(a){return null==a?this.tbox().cy:this.y(a-this.tbox().height/2)}},construct:{group:function(){return this.put(new s.G)}}}),s.extend(s.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var a=this.position()+1,b=this.parent();return b.removeElement(this).add(this,a),b instanceof s.Doc&&b.node.appendChild(b.defs().node),this},backward:function(){var a=this.position();return a>0&&this.parent().removeElement(this).add(this,a-1),this},front:function(){var a=this.parent();return a.node.appendChild(this.node),a instanceof s.Doc&&a.node.appendChild(a.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(a){a.remove();var b=this.position();return this.parent().add(a,b),this},after:function(a){a.remove();var b=this.position();return this.parent().add(a,b+1),this}}),s.Mask=s.invent({create:function(){this.constructor.call(this,s.create("mask")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unmask();return delete this.targets,this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new s.Mask)}}}),s.extend(s.Element,{maskWith:function(a){return this.masker=a instanceof s.Mask?a:this.parent().mask().add(a),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),s.ClipPath=s.invent({create:function(){this.constructor.call(this,s.create("clipPath")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unclip();return delete this.targets,this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new s.ClipPath)}}}),s.extend(s.Element,{clipWith:function(a){return this.clipper=a instanceof s.ClipPath?a:this.parent().clip().add(a),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),s.Gradient=s.invent({create:function(a){this.constructor.call(this,s.create(a+"Gradient")),this.type=a},inherit:s.Container,extend:{at:function(a,b,c){return this.put(new s.Stop).update(a,b,c)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()}},construct:{gradient:function(a,b){return this.defs().gradient(a,b)}}}),s.extend(s.Gradient,s.FX,{from:function(a,b){return"radial"==(this.target||this).type?this.attr({fx:new s.Number(a),fy:new s.Number(b)}):this.attr({x1:new s.Number(a),y1:new s.Number(b)})},to:function(a,b){return"radial"==(this.target||this).type?this.attr({cx:new s.Number(a),cy:new s.Number(b)}):this.attr({x2:new s.Number(a),y2:new s.Number(b)})}}),s.extend(s.Defs,{gradient:function(a,b){return this.put(new s.Gradient(a)).update(b)}}),s.Stop=s.invent({create:"stop",inherit:s.Element,extend:{update:function(a){return("number"==typeof a||a instanceof s.Number)&&(a={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new s.Number(a.offset)),this}}}),s.Pattern=s.invent({create:"pattern",inherit:s.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return this.fill()}},construct:{pattern:function(a,b,c){return this.defs().pattern(a,b,c)}}}),s.extend(s.Defs,{pattern:function(a,b,c){return this.put(new s.Pattern).update(c).attr({x:0,y:0,width:a,height:b,patternUnits:"userSpaceOnUse"})}}),s.Doc=s.invent({create:function(a){a&&(a="string"==typeof a?document.getElementById(a):a,"svg"==a.nodeName?this.constructor.call(this,a):(this.constructor.call(this,s.create("svg")),a.appendChild(this.node)),this.namespace().size("100%","100%").defs())},inherit:s.Container,extend:{namespace:function(){return this.attr({xmlns:s.ns,version:"1.1"}).attr("xmlns:xlink",s.xlink,s.xmlns)},defs:function(){if(!this._defs){var a;(a=this.node.getElementsByTagName("defs")[0])?this._defs=s.adopt(a):this._defs=new s.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(a){var b=this.node.getScreenCTM();return b&&this.style("left",-b.e%1+"px").style("top",-b.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this}}}),s.Shape=s.invent({create:function(a){this.constructor.call(this,a)},inherit:s.Element}),s.Bare=s.invent({create:function(a,b){if(this.constructor.call(this,s.create(a)),b)for(var c in b.prototype)"function"==typeof b.prototype[c]&&(this[c]=b.prototype[c])},inherit:s.Element,extend:{words:function(a){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(document.createTextNode(a)),this}}}),s.extend(s.Parent,{element:function(a,b){return this.put(new s.Bare(a,b))},symbol:function(){return this.defs().element("symbol",s.Container)}}),s.Use=s.invent({create:"use",inherit:s.Shape,extend:{element:function(a,b){return this.attr("href",(b||"")+"#"+a,s.xlink)}},construct:{use:function(a,b){return this.put(new s.Use).element(a,b)}}}),s.Rect=s.invent({create:"rect",inherit:s.Shape,construct:{rect:function(a,b){return this.put((new s.Rect).size(a,b))}}}),s.Circle=s.invent({create:"circle",inherit:s.Shape,construct:{circle:function(a){return this.put(new s.Circle).rx(new s.Number(a).divide(2)).move(0,0)}}}),s.extend(s.Circle,s.FX,{rx:function(a){return this.attr("r",a)},ry:function(a){return this.rx(a)}}),s.Ellipse=s.invent({create:"ellipse",inherit:s.Shape,construct:{ellipse:function(a,b){return this.put(new s.Ellipse).size(a,b).move(0,0)}}}),s.extend(s.Ellipse,s.Rect,s.FX,{rx:function(a){return this.attr("rx",a)},ry:function(a){return this.attr("ry",a)}}),s.extend(s.Circle,s.Ellipse,{x:function(a){return null==a?this.cx()-this.rx():this.cx(a+this.rx())},y:function(a){return null==a?this.cy()-this.ry():this.cy(a+this.ry())},cx:function(a){return null==a?this.attr("cx"):this.attr("cx",a)},cy:function(a){return null==a?this.attr("cy"):this.attr("cy",a)},width:function(a){return null==a?2*this.rx():this.rx(new s.Number(a).divide(2))},height:function(a){return null==a?2*this.ry():this.ry(new s.Number(a).divide(2))},size:function(a,b){var c=h(this.bbox(),a,b);return this.rx(new s.Number(c.width).divide(2)).ry(new s.Number(c.height).divide(2))}}),s.Line=s.invent({create:"line",inherit:s.Shape,extend:{array:function(){return new s.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(a,b,c,d){return a=4==arguments.length?{x1:a,y1:b,x2:c,y2:d}:new s.PointArray(a).toLine(),this.attr(a)},move:function(a,b){return this.attr(this.array().move(a,b).toLine())},size:function(a,b){var c=h(this.bbox(),a,b);return this.attr(this.array().size(c.width,c.height).toLine())}},construct:{line:function(a,b,c,d){return this.put(new s.Line).plot(a,b,c,d)}}}),s.Polyline=s.invent({create:"polyline",inherit:s.Shape,construct:{polyline:function(a){return this.put(new s.Polyline).plot(a)}}}),s.Polygon=s.invent({create:"polygon",inherit:s.Shape,construct:{polygon:function(a){return this.put(new s.Polygon).plot(a)}}}),s.extend(s.Polyline,s.Polygon,{array:function(){return this._array||(this._array=new s.PointArray(this.attr("points")))},plot:function(a){return this.attr("points",this._array=new s.PointArray(a))},move:function(a,b){return this.attr("points",this.array().move(a,b))},size:function(a,b){var c=h(this.bbox(),a,b);return this.attr("points",this.array().size(c.width,c.height))}}),s.extend(s.Line,s.Polyline,s.Polygon,{morphArray:s.PointArray,x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},width:function(a){var b=this.bbox();return null==a?b.width:this.size(a,b.height)},height:function(a){var b=this.bbox();return null==a?b.height:this.size(b.width,a)}}),s.Path=s.invent({create:"path",inherit:s.Shape,extend:{morphArray:s.PathArray,array:function(){return this._array||(this._array=new s.PathArray(this.attr("d")))},plot:function(a){return this.attr("d",this._array=new s.PathArray(a))},move:function(a,b){return this.attr("d",this.array().move(a,b))},x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},size:function(a,b){var c=h(this.bbox(),a,b);return this.attr("d",this.array().size(c.width,c.height))},width:function(a){return null==a?this.bbox().width:this.size(a,this.bbox().height)},height:function(a){return null==a?this.bbox().height:this.size(this.bbox().width,a)}},construct:{path:function(a){return this.put(new s.Path).plot(a)}}}),s.Image=s.invent({create:"image",inherit:s.Shape,extend:{load:function(a){if(!a)return this;var b=this,c=document.createElement("img");return c.onload=function(){var d=b.parent(s.Pattern);0==b.width()&&0==b.height()&&b.size(c.width,c.height),d&&0==d.width()&&0==d.height()&&d.size(b.width(),b.height()),"function"==typeof b._loaded&&b._loaded.call(b,{width:c.width,height:c.height,ratio:c.width/c.height,url:a})},this.attr("href",c.src=this.src=a,s.xlink)},loaded:function(a){return this._loaded=a,this}},construct:{image:function(a,b,c){return this.put(new s.Image).load(a).size(b||0,c||b||0)}}}),s.Text=s.invent({create:function(){this.constructor.call(this,s.create("text")),this._leading=new s.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",s.defaults.attrs["font-family"])},inherit:s.Shape,extend:{clone:function(){var a=p(this.node.cloneNode(!0));return a.lines().each(function(){this.newLined=!0}),this.after(a),a},x:function(a){return null==a?this.attr("x"):(this.textPath||this.lines().each(function(){this.newLined&&this.x(a)}),this.attr("x",a))},y:function(a){var b=this.attr("y"),c="number"==typeof b?b-this.bbox().y:0;return null==a?"number"==typeof b?b-c:b:this.attr("y","number"==typeof a?a+c:a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)},text:function(a){if("undefined"==typeof a)return this.content;if(this.clear().build(!0),"function"==typeof a)a.call(this,this);else{a=(this.content=a).split("\n");for(var b=0,c=a.length;c>b;b++)this.tspan(a[b]).newLine()}return this.build(!1).rebuild()},size:function(a){return this.attr("font-size",a).rebuild()},leading:function(a){return null==a?this._leading:(this._leading=new s.Number(a),this.rebuild())},lines:function(){var a=s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(a){return s.adopt(a)});return new s.Set(a)},rebuild:function(a){if("boolean"==typeof a&&(this._rebuild=a),this._rebuild){var b=this;this.lines().each(function(){this.newLined&&(this.textPath||this.attr("x",b.attr("x")),this.attr("dy",b._leading*new s.Number(b.attr("font-size"))))}),this.fire("rebuild")}return this},build:function(a){return this._build=!!a,this}},construct:{text:function(a){return this.put(new s.Text).text(a)},plain:function(a){return this.put(new s.Text).plain(a)}}}),s.Tspan=s.invent({create:"tspan",inherit:s.Shape,extend:{text:function(a){
return"function"==typeof a?a.call(this,this):this.plain(a),this},dx:function(a){return this.attr("dx",a)},dy:function(a){return this.attr("dy",a)},newLine:function(){var a=this.parent(s.Text);return this.newLined=!0,this.dy(a._leading*a.attr("font-size")).attr("x",a.x())}}}),s.extend(s.Text,s.Tspan,{plain:function(a){return this._build===!1&&this.clear(),this.node.appendChild(document.createTextNode(this.content=a)),this},tspan:function(a){var b=(this.textPath()||this).node,c=new s.Tspan;return this._build===!1&&this.clear(),b.appendChild(c.node),c.text(a)},clear:function(){for(var a=(this.textPath()||this).node;a.hasChildNodes();)a.removeChild(a.lastChild);return this instanceof s.Text&&(this.content=""),this},length:function(){return this.node.getComputedTextLength()}}),s.TextPath=s.invent({create:"textPath",inherit:s.Element,parent:s.Text,construct:{path:function(a){for(var b=new s.TextPath,c=this.doc().defs().path(a);this.node.hasChildNodes();)b.node.appendChild(this.node.firstChild);return this.node.appendChild(b.node),b.attr("href","#"+c,s.xlink),this},plot:function(a){var b=this.track();return b&&b.plot(a),this},track:function(){var a=this.textPath();return a?a.reference("href"):void 0},textPath:function(){return this.node.firstChild&&"textPath"==this.node.firstChild.nodeName?s.adopt(this.node.firstChild):void 0}}}),s.Nested=s.invent({create:function(){this.constructor.call(this,s.create("svg")),this.style("overflow","visible")},inherit:s.Container,construct:{nested:function(){return this.put(new s.Nested)}}}),s.A=s.invent({create:"a",inherit:s.Container,extend:{to:function(a){return this.attr("href",a,s.xlink)},show:function(a){return this.attr("show",a,s.xlink)},target:function(a){return this.attr("target",a)}},construct:{link:function(a){return this.put(new s.A).to(a)}}}),s.extend(s.Element,{linkTo:function(a){var b=new s.A;return"function"==typeof a?a.call(b,b):b.to(a),this.parent().put(b).put(this)}}),s.Marker=s.invent({create:"marker",inherit:s.Container,extend:{width:function(a){return this.attr("markerWidth",a)},height:function(a){return this.attr("markerHeight",a)},ref:function(a,b){return this.attr("refX",a).attr("refY",b)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(a,b,c){return this.defs().marker(a,b,c)}}}),s.extend(s.Defs,{marker:function(a,b,c){return this.put(new s.Marker).size(a,b).ref(a/2,b/2).viewbox(0,0,a,b).attr("orient","auto").update(c)}}),s.extend(s.Line,s.Polyline,s.Polygon,s.Path,{marker:function(a,b,c,d){var e=["marker"];return"all"!=a&&e.push(a),e=e.join("-"),a=arguments[1]instanceof s.Marker?arguments[1]:this.doc().marker(b,c,d),this.attr(e,a)}});var t={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(a,b){return"color"==b?a:a+"-"+b}};["fill","stroke"].forEach(function(a){var b,c={};c[a]=function(c){if("string"==typeof c||s.Color.isRgb(c)||c&&"function"==typeof c.fill)this.attr(a,c);else for(b=t[a].length-1;b>=0;b--)null!=c[t[a][b]]&&this.attr(t.prefix(a,t[a][b]),c[t[a][b]]);return this},s.extend(s.Element,s.FX,c)}),s.extend(s.Element,s.FX,{rotate:function(a,b,c){return this.transform({rotation:a,cx:b,cy:c})},skew:function(a,b,c,d){return this.transform({skewX:a,skewY:b,cx:c,cy:d})},scale:function(a,b,c,d){return 1==arguments.length||3==arguments.length?this.transform({scale:a,cx:b,cy:c}):this.transform({scaleX:a,scaleY:b,cx:c,cy:d})},translate:function(a,b){return this.transform({x:a,y:b})},flip:function(a,b){return this.transform({flip:a,offset:b})},matrix:function(a){return this.attr("transform",new s.Matrix(a))},opacity:function(a){return this.attr("opacity",a)},dx:function(a){return this.x((this.target||this).x()+a)},dy:function(a){return this.y((this.target||this).y()+a)},dmove:function(a,b){return this.dx(a).dy(b)}}),s.extend(s.Rect,s.Ellipse,s.Circle,s.Gradient,s.FX,{radius:function(a,b){var c=(this.target||this).type;return"radial"==c||"circle"==c?this.attr({r:new s.Number(a)}):this.rx(a).ry(null==b?a:b)}}),s.extend(s.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(a){return this.node.getPointAtLength(a)}}),s.extend(s.Parent,s.Text,s.FX,{font:function(a){for(var b in a)"leading"==b?this.leading(a[b]):"anchor"==b?this.attr("text-anchor",a[b]):"size"==b||"family"==b||"weight"==b||"stretch"==b||"variant"==b||"style"==b?this.attr("font-"+b,a[b]):this.attr(b,a[b]);return this}}),s.Set=s.invent({create:function(a){Array.isArray(a)?this.members=a:this.clear()},extend:{add:function(){var a,b,c=[].slice.call(arguments);for(a=0,b=c.length;b>a;a++)this.members.push(c[a]);return this},remove:function(a){var b=this.index(a);return b>-1&&this.members.splice(b,1),this},each:function(a){for(var b=0,c=this.members.length;c>b;b++)a.apply(this.members[b],[b,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(a){return this.index(a)>=0},index:function(a){return this.members.indexOf(a)},get:function(a){return this.members[a]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){var a=new s.BBox;if(0==this.members.length)return a;var b=this.members[0].rbox();return a.x=b.x,a.y=b.y,a.width=b.width,a.height=b.height,this.each(function(){a=a.merge(this.rbox())}),a}},construct:{set:function(a){return new s.Set(a)}}}),s.FX.Set=s.invent({create:function(a){this.set=a}}),s.Set.inherit=function(){var a,b=[];for(var a in s.Shape.prototype)"function"==typeof s.Shape.prototype[a]&&"function"!=typeof s.Set.prototype[a]&&b.push(a);b.forEach(function(a){s.Set.prototype[a]=function(){for(var b=0,c=this.members.length;c>b;b++)this.members[b]&&"function"==typeof this.members[b][a]&&this.members[b][a].apply(this.members[b],arguments);return"animate"==a?this.fx||(this.fx=new s.FX.Set(this)):this}}),b=[];for(var a in s.FX.prototype)"function"==typeof s.FX.prototype[a]&&"function"!=typeof s.FX.Set.prototype[a]&&b.push(a);b.forEach(function(a){s.FX.Set.prototype[a]=function(){for(var b=0,c=this.set.members.length;c>b;b++)this.set.members[b].fx[a].apply(this.set.members[b].fx,arguments);return this}})},s.extend(s.Element,{data:function(a,b,c){if("object"==typeof a)for(b in a)this.data(b,a[b]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch(d){return this.attr("data-"+a)}else this.attr("data-"+a,null===b?null:c===!0||"string"==typeof b||"number"==typeof b?b:JSON.stringify(b));return this}}),s.extend(s.Element,{remember:function(a,b){if("object"==typeof arguments[0])for(var b in a)this.remember(b,a[b]);else{if(1==arguments.length)return this.memory()[a];this.memory()[a]=b}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var a=arguments.length-1;a>=0;a--)delete this.memory()[arguments[a]];return this},memory:function(){return this._memory||(this._memory={})}}),s.get=function(a){var b=document.getElementById(r(a)||a);return b?s.adopt(b):void 0},s.select=function(a,b){return new s.Set(s.utils.map((b||document).querySelectorAll(a),function(a){return s.adopt(a)}))},s.extend(s.Parent,{select:function(a){return s.select(a,this.node)}});var u="abcdef".split("");if("function"!=typeof v){var v=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};v.prototype=window.Event.prototype,window.CustomEvent=v}return function(a){for(var b=0,c=["moz","webkit"],d=0;d<c.length&&!window.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame=a.requestAnimationFrame||function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f},a.cancelAnimationFrame=a.cancelAnimationFrame||a.clearTimeout}(window),s})}]);